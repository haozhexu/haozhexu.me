<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Swift Study Notes | Haozhe XU</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/works/">My Works</a></li>
      
      <li><a href="/poems/">Poem / 诗词</a></li>
      
      <li><a href="/article">Article</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/cn/">简体中文</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Swift Study Notes</span></h1>

<h2 class="date">2020/09/06</h2>
</div>

<main>
<h1 id="swift-study-notes">Swift Study Notes</h1>
<p><em>The source of this file is available on <a href="https://github.com/haozhexu/SwiftNotes">Github</a> where you can find the XCode playground file.</em></p>
<p><em>The generated markdown is currently used as a Hugo generated content hosted on my website <a href="https://www.haozhexu.me/article/2020/swiftnotes">haozhexu.me</a> for better readability.</em></p>
<p>This is the playground I used during learning Swift, I mainly read <a href="https://docs.swift.org/swift-book/index.html">The Swift Programming Language</a> from Apple, took notes and wrote code as I read.</p>
<p>Soon I realised the notes could be organized in a way so that a human readable markdown could be generated with some tweaks, and I can even use <a href="https://gohugo.io/">Hugo</a> to generate an HTML from it and host it somewhere.</p>
<p>As a result, this markdown was directly generated from the code and comments in the playground.</p>
<p>To make this possible, comments in the code have to follow certain conventions in order to have the right content format for markdown as well as keeping Playground able to compile. The convention looks like:</p>
<pre><code>// This is a comment, will become text content of **markdown**.
// Below will become a fragment of code:

// ```swift
// let name = &quot;Noname&quot;
// ```
</code></pre><p><strong>Simple way to generate markdown from above code:</strong></p>
<pre><code>sed 's/^\/\/ //g' SwiftBasicNotes.playground/Contents.swift &gt; ~/Documents/SwiftBasicNotes.md
(strips leading double slashes followed by a space from each line)
</code></pre><p><em>(PS: the details of how to generate markdown from the source code is written in the markdown itself, embedded as comments in the source code, this recursion feels weird, doesn&rsquo;t it? It feels like a hungry snake swallows down itself from its own tail.)</em></p>
<h2 id="hello-world-printing">&ldquo;Hello, world!&rdquo; Printing</h2>
<p>The classic &ldquo;Hello, world!&rdquo; print out illustrates a few things of the language: no semicolon needed to end a line, how a function/method call looks like, how string literal is represented in Swift which doesn&rsquo;t need an @ sign as in Objective-C.</p>
<pre><code>print(&quot;Science may someday discover what faith has always known.&quot;)
</code></pre><h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#constants-and-variables">Constants and Variables</a></li>
<li><a href="#types-and-operations">Types and Operations</a></li>
<li><a href="#control-flow">Control Flow</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#optionals">Optionals</a></li>
<li><a href="#collection-types">Collection Types</a>
<ul>
<li><a href="#array">Array</a></li>
<li><a href="#set">Set</a></li>
<li><a href="#dictionary">Dictionary</a></li>
</ul>
</li>
<li><a href="#closures">Closures</a></li>
<li><a href="#strings-and-characters">Strings and Characters</a></li>
<li><a href="#enumerations">Enumerations</a></li>
<li><a href="#classes-and-structures">Classes and Structures</a></li>
<li><a href="#protocols">Protocols</a></li>
<li><a href="#generics">Generics</a></li>
<li><a href="#access-control">Access Control</a></li>
<li><a href="#advanced-operators">Advanced Operators</a></li>
<li><a href="#patterns">Patterns</a></li>
<li><a href="#error-handling">Error Handling</a></li>
<li><a href="#encoding-and-decoding">Encoding and Decoding</a></li>
<li><a href="#memory-safety">Memory Safety</a></li>
<li><a href="#data-structure-in-swift">Data Structure in Swift</a></li>
<li><a href="#sorting-and-searching">Sorting and Searching</a></li>
<li><a href="#objective-c">Objective-C</a></li>
</ul>
<h2 id="constants-and-variables">Constants and Variables</h2>
<p><em>constant:</em></p>
<blockquote>
<p>Something mysterious is formed, born in the silent void. waiting alone and unmoving, it is at once still and yet in <strong>constant</strong> motion. It is the source of all programs. I do not know its name, so I will call it the Tao of Programming. - <em>The Tao of Programming</em></p>
</blockquote>
<p><em>variable:</em></p>
<blockquote>
<p>Cloudy; <strong>variable</strong> winds, with local showers; cooler; snow. - <em>Halcyon Jones</em></p>
</blockquote>
<pre><code>let &lt;constant name&gt;: &lt;type&gt; = &lt;expression&gt;
var &lt;variable name&gt;: &lt;type&gt; = &lt;expression&gt;
</code></pre><ul>
<li><strong>Make sure</strong> constant or variable has value set before the first time its value is read</li>
<li><em>tip</em>: if the value of a variable isn&rsquo;t modified throughout its lifecycle, or not intended to be modified, define it as a constant instead, this makes sure any unexpected change could be captured by compiler</li>
</ul>
<blockquote>
<p>Historians say the Egyptians revered the number nine because they associated it with their sun god, Atum-Ra. According to one version, Ra gave birth to eight other gods. Since Ra often took the form of a cat, people began associating the nine lives (Ra plus eight) with feline longevity.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> catsMaximumNumberOfLives = <span style="color:#ae81ff">9</span> <span style="color:#75715e">// constant</span>
<span style="color:#66d9ef">var</span> catsCurrentDeathCount = <span style="color:#ae81ff">0</span> <span style="color:#75715e">// variable</span>
catsCurrentDeathCount = <span style="color:#ae81ff">3</span>
catsMaximumNumberOfLives = <span style="color:#ae81ff">10</span> <span style="color:#75715e">// this would generate a compiler error</span>

<span style="color:#75715e">// multiple constants or variables on a single line:</span>
<span style="color:#66d9ef">var</span> variable1 = <span style="color:#ae81ff">0.0</span>, variable2 = <span style="color:#ae81ff">1.2</span>, variable3 = <span style="color:#ae81ff">5.6</span>
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="types-and-operations">Types and Operations</h2>
<h3 id="type-annotations">Type Annotations</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> welcomeMessage: String = <span style="color:#e6db74">&#34;Welcome!&#34;</span>
<span style="color:#66d9ef">var</span> red: Double = <span style="color:#ae81ff">1.0</span>
<span style="color:#66d9ef">var</span> someNumber: Int = <span style="color:#ae81ff">9</span>
</code></pre></div><p>Semicolon (;) isn&rsquo;t required after each statement although you can;
Required for separating statements on the same line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> sameLineGuru = <span style="color:#e6db74">&#34;Same Liner&#34;</span>; print(<span style="color:#e6db74">&#34;This is Mr. </span><span style="color:#e6db74">\(</span>sameLineGuru<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><p>string interpolation was used above to include the name of a constant or variable as a placeholder in a longer string, and to prompt Swift to replace it with the current value of that constant or variable.</p>
<h3 id="integers">Integers</h3>
<blockquote>
<p>God made the <strong>integers</strong>; all else is the work of Man.
&ndash; Kronecker</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// Int is usually used, it&#39;s the same size as `Int32` on 32-bit platform and same size as `Int64` on 64-bit platform</span>
<span style="color:#66d9ef">let</span> integer: Int
<span style="color:#66d9ef">let</span> integer8: Int8 = <span style="color:#ae81ff">8</span> <span style="color:#75715e">// signed 8-bit integer, UInt8 for unsigned</span>
<span style="color:#66d9ef">let</span> integer16: Int16 = <span style="color:#ae81ff">16</span> <span style="color:#75715e">// signed 16-bit integer, UInt16 for unsigned</span>
<span style="color:#66d9ef">let</span> integer32: Int32 = <span style="color:#ae81ff">32</span> <span style="color:#75715e">// signed 32-bit integer, UInt32 for unsigned</span>
<span style="color:#66d9ef">let</span> integer64: Int64 = <span style="color:#ae81ff">64</span> <span style="color:#75715e">// signed 64-bit integer, UInt64 for unsigned</span>
</code></pre></div><h4 id="integer-bounds">Integer Bounds</h4>
<p>General rule of the bounds of integers:</p>
<ul>
<li>unsigned X-bit integer range from 0 to (2^X)-1 inclusive</li>
<li>signed X-bit integer range from -(2^(X-1)) to (2^(X-1))-1 inclusive</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">print(<span style="color:#e6db74">&#34;maximum value of UInt16 is </span><span style="color:#e6db74">\(</span>UInt16.max<span style="color:#e6db74">)</span><span style="color:#e6db74"> which is (2^16)-1 = </span><span style="color:#e6db74">\(</span>Int<span style="color:#e6db74">(</span>pow<span style="color:#e6db74">(</span><span style="color:#ae81ff">2.0</span>, <span style="color:#ae81ff">16.0</span><span style="color:#e6db74">)</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">))</span><span style="color:#e6db74">&#34;</span>)
print(<span style="color:#e6db74">&#34;minimum value of Int8 is </span><span style="color:#e6db74">\(</span>Int8.min<span style="color:#e6db74">)</span><span style="color:#e6db74"> which is -(2^(8-1)) = </span><span style="color:#e6db74">\(</span><span style="color:#f92672">-</span>Int<span style="color:#e6db74">(</span>pow<span style="color:#e6db74">(</span><span style="color:#ae81ff">2.0</span>, <span style="color:#ae81ff">8.0</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1.0</span><span style="color:#e6db74">)))</span><span style="color:#e6db74">&#34;</span>)
print(<span style="color:#e6db74">&#34;maximum value of Int32 is </span><span style="color:#e6db74">\(</span>Int32.max<span style="color:#e6db74">)</span><span style="color:#e6db74"> which is (2^(32-1))-1 = </span><span style="color:#e6db74">\(</span>Int<span style="color:#e6db74">(</span>pow<span style="color:#e6db74">(</span><span style="color:#ae81ff">2.0</span>, <span style="color:#ae81ff">32.0</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1.0</span><span style="color:#e6db74">))</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="floating-points">Floating Points</h3>
<ul>
<li><code>Double</code>: a 64-bit floating-point number, usually preferred</li>
<li><code>Float</code>: a 32-bit floating-point number</li>
</ul>
<h3 id="type-safe-and-type-inferences">Type Safe and Type Inferences</h3>
<blockquote>
<p>The biggest regret in life is that one cannot have youth and the feeling of youth at the same time.</p>
<ul>
<li>Hemingway</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> youth = <span style="color:#ae81ff">3</span>
<span style="color:#75715e">// inferred to be type `Int`</span>

<span style="color:#66d9ef">let</span> feelingOfYouth = <span style="color:#ae81ff">0.14</span>
<span style="color:#75715e">// inferred to be type `Double`</span>

<span style="color:#66d9ef">let</span> pi = <span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.1415926</span>
<span style="color:#75715e">// Inferred to be type `Double`</span>

<span style="color:#66d9ef">let</span> anotherPi = youth <span style="color:#f92672">+</span> feelingOfYouth
<span style="color:#75715e">// error: binary operator &#39;+&#39; cannot be applied to operands of type &#39;Int&#39; and &#39;Double&#39;</span>
</code></pre></div><h3 id="type-conversion">Type Conversion</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> alsoPi = Double(youth) <span style="color:#f92672">+</span> feelingOfYouth
<span style="color:#66d9ef">let</span> werePi = Int(alsoPi) <span style="color:#75715e">// lost precision</span>
</code></pre></div><h3 id="type-alias">Type Alias</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">typealias</span> Mood = UInt8
print(<span style="color:#e6db74">&#34;mood: happy = </span><span style="color:#e6db74">\(</span>Mood.max<span style="color:#e6db74">)</span><span style="color:#e6db74"> sad = </span><span style="color:#e6db74">\(</span>Mood.min<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="numeric-literals">Numeric Literals</h3>
<p>Apart from decimals, numbers with base 8, 16, or 2 (ie. binary) are sometimes used in programming. Each of these can be written as integer literals.</p>
<ul>
<li><em>decimal</em> number has no prefix, e.g. 10</li>
<li><em>binary</em> number with <code>0b</code> prefix, e.g. <code>0b101</code></li>
<li><em>octal</em> number with <code>0o</code> prefix</li>
<li><em>hexadecimal</em> number with <code>0x</code> prefix</li>
</ul>
<h3 id="booleans">Booleans</h3>
<p><em>Boolean</em> type (<code>Bool</code>) in Swift is often referred to as <em>logical</em> with values of either <code>true</code> or <code>false</code>.</p>
<blockquote>
<p>The following statement is <em>true</em>.</p>
</blockquote>
<blockquote>
<p>The previous statement is <em>false</em>.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> fake = <span style="color:#66d9ef">false</span>
<span style="color:#66d9ef">let</span> truth = <span style="color:#66d9ef">true</span>
</code></pre></div><h3 id="assignment-operator">Assignment operator</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> b = <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">var</span> a = <span style="color:#ae81ff">5</span>
a = b <span style="color:#75715e">// a is now equal to 10</span>
<span style="color:#66d9ef">let</span> (x, y) = (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>) <span style="color:#75715e">// x is 1 and y is 2</span>
</code></pre></div><h3 id="arithmetic-operator">Arithmetic operator</h3>
<blockquote>
<p><strong>Arithmetic</strong> is being able to count up to twenty without taking off your shoes. - Mickey Mouse</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>       <span style="color:#75715e">// addition (+)</span>
<span style="color:#ae81ff">5</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">3</span>       <span style="color:#75715e">// subtraction (-)</span>
<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>       <span style="color:#75715e">// multiplication (*)</span>
<span style="color:#ae81ff">10.0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.5</span>  <span style="color:#75715e">// division (/)</span>
<span style="color:#ae81ff">9</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">4</span>       <span style="color:#75715e">// remainder (%)</span>
<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span>          <span style="color:#75715e">// unary minus</span>
<span style="color:#f92672">+</span><span style="color:#ae81ff">6</span>          <span style="color:#75715e">// unary plus</span>
</code></pre></div><h3 id="compound-assignemnt-operators">Compound assignemnt operators</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">a = <span style="color:#ae81ff">1</span>
a <span style="color:#f92672">+=</span> <span style="color:#ae81ff">2</span>
a <span style="color:#f92672">-=</span> <span style="color:#ae81ff">5</span>
a <span style="color:#f92672">*=</span> <span style="color:#ae81ff">3</span>
a <span style="color:#f92672">/=</span> <span style="color:#ae81ff">2</span>
</code></pre></div><h3 id="comparison-operators">Comparison Operators</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#ae81ff">1</span> == <span style="color:#ae81ff">1</span>  <span style="color:#75715e">// equal to</span>
<span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e">// not equal to</span>
<span style="color:#ae81ff">2</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>   <span style="color:#75715e">// greater than</span>
<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>   <span style="color:#75715e">// less than</span>
<span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e">// greater than or equal to</span>
<span style="color:#ae81ff">2</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e">// less than or equal to</span>
</code></pre></div><p>You can compare two tuples if they have the same type and the same number of values,
tuples are compared from left to right, and you can compare &ldquo;Apple&rdquo; with &ldquo;Orange&rdquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;zebra&#34;</span>) <span style="color:#f92672">&lt;</span> (<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;apple&#34;</span>)
<span style="color:#75715e">// 1 is less than 2 and &#34;zebra&#34; and &#34;apple&#34; are not compared</span>

(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;apple&#34;</span>) <span style="color:#f92672">&lt;</span> (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;orange&#34;</span>)
<span style="color:#75715e">// 3 is equal to 3 and &#34;apple&#34; is less than &#34;orange&#34;</span>

(<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#34;dog&#34;</span>) == (<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#34;dog&#34;</span>)
<span style="color:#75715e">// all equal</span>
</code></pre></div><h3 id="tuples">Tuples</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someCoordinates: (Int, Int) = (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">6</span>)
<span style="color:#66d9ef">let</span> someOtherCoordinates = (<span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">97</span>)
<span style="color:#75715e">// type inference without type `(Int, Int)`</span>

<span style="color:#75715e">// access value by index:</span>
print(<span style="color:#e6db74">&#34;some coordinate is (</span><span style="color:#e6db74">\(</span>someCoordinates.<span style="color:#ae81ff">0</span><span style="color:#e6db74">)</span><span style="color:#e6db74">, </span><span style="color:#e6db74">\(</span>someCoordinates.<span style="color:#ae81ff">1</span><span style="color:#e6db74">)</span><span style="color:#e6db74">)&#34;</span>);

<span style="color:#75715e">// access value by name:</span>
<span style="color:#66d9ef">let</span> someCoordinatesNamed = (x: <span style="color:#ae81ff">71</span>, y: <span style="color:#ae81ff">89</span>)
print(<span style="color:#e6db74">&#34;some coordinate has x = </span><span style="color:#e6db74">\(</span>someCoordinatesNamed.x<span style="color:#e6db74">)</span><span style="color:#e6db74"> and y = </span><span style="color:#e6db74">\(</span>someCoordinatesNamed.y<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="range-operators">Range operators</h3>
<p><em>closed range operator</em>:
<code>(a...b)</code> defines a range from <code>a</code> to <code>b</code> inclusive, <code>a</code> must not be greater than <code>b</code>.</p>
<p><em>half-open range operator</em>:
<code>(a..&lt;b)</code> defines a range from <code>a</code> up to, but not include <code>b</code>.</p>
<p><em>one-sided range</em>:
a range that continue as far as possible, e.g. <code>array[3...]</code> from 3 to the end, <code>array[...9]</code> from beginning up to 9</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someArray = [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]
print(someArray[<span style="color:#ae81ff">5.</span>..]) <span style="color:#75715e">// [6, 7, 8, 9]</span>
print(someArray[...<span style="color:#ae81ff">3</span>]) <span style="color:#75715e">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="terminology">Terminology</h3>
<ul>
<li><em>Unary</em> operators operate on a single target
<ul>
<li>unary <em>prefix</em> operators appear immediately before their targets (such as <code>!b</code>)</li>
<li>unary <em>postfix</em> operators appear immediately after their targets (such as <code>c!</code>)</li>
</ul>
</li>
<li><em>Binary</em> operators operate on two targets
<ul>
<li>e.g. 2 + 3</li>
<li>are <em>infix</em> because they appear between their two targets</li>
</ul>
</li>
<li><em>Ternary</em> operators operate on three targets
<ul>
<li>only ternary operator: <code>a ? b : c</code></li>
</ul>
</li>
</ul>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="control-flow">Control Flow</h2>
<p><a href="#comparison-operators">Comparison Operators</a> let you compare values and get an answer of either <code>true</code> or <code>false</code></p>
<h3 id="if-else-statement">if-else statement</h3>
<blockquote>
<p><strong>If</strong> all <strong>else</strong> fails, immortality can always be assured by spectacular error. &ndash; John Kenneth Galbraith</p>
</blockquote>
<pre><code>if &lt;condition&gt; {
    &lt;statement&gt;
}
</code></pre><pre><code>if &lt;condition1&gt; {
    &lt;statement1&gt;
} else if &lt;condition2&gt; {
    &lt;statement2&gt;
} else {
    &lt;statement3&gt;
}
</code></pre><pre><code>if &lt;condition&gt; {
    &lt;statement1&gt;
} else {
    &lt;statement2&gt;
}
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> isOnePlusOneEqualThree = (<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) == <span style="color:#ae81ff">3</span>
<span style="color:#66d9ef">false</span>, `==` equality comparison

<span style="color:#66d9ef">let</span> isFake = isOnePlusOneEqualThree == <span style="color:#66d9ef">false</span>

<span style="color:#66d9ef">if</span> isFake == <span style="color:#66d9ef">true</span> {
    print(<span style="color:#e6db74">&#34;The truth is fake.&#34;</span>)
}
</code></pre></div><h3 id="short-circuiting">Short Circuiting</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> isGovernmentGreaterThanItsPeople = <span style="color:#e6db74">&#34;government&#34;</span> <span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;people&#34;</span>
<span style="color:#66d9ef">if</span> isGovernmentGreaterThanItsPeople <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> == <span style="color:#ae81ff">2</span> {
    <span style="color:#75715e">// because the first condition is false</span>
    <span style="color:#75715e">// there&#39;s no need to check the second condition even if it&#39;s true</span>
    print(<span style="color:#e6db74">&#34;People should be afraid of their government.&#34;</span>)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;Government should be afraid of its people.&#34;</span>)
}
<span style="color:#75715e">// Result: Government should be afraid of its people.</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someoneIsDrunk = <span style="color:#66d9ef">true</span>
<span style="color:#66d9ef">let</span> divorceAgreementReadyToSign = <span style="color:#66d9ef">true</span>

<span style="color:#66d9ef">if</span> someoneIsDrunk <span style="color:#f92672">||</span> divorceAgreementReadyToSign == <span style="color:#66d9ef">false</span> {
    <span style="color:#75715e">// even if the divorce agreement is ready to sign</span>
    <span style="color:#75715e">// since the person is drunk, ie. first condition is true</span>
    <span style="color:#75715e">// there&#39;s no need to check the second condition</span>
    print(<span style="color:#e6db74">&#34;Let&#39;s decide later.&#34;</span>)
}
</code></pre></div><h3 id="ternary-conditional-operator">Ternary Conditional Operator</h3>
<pre><code>(&lt;CONDITION&gt;) ? &lt;TRUE VALUE&gt; : &lt;FALSE VALUE&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> weightOfMountain = <span style="color:#ae81ff">9</span>
<span style="color:#66d9ef">let</span> weightOfFeather = <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">let</span> onesLife = <span style="color:#ae81ff">0</span>
<span style="color:#66d9ef">let</span> anotherOnesLife = <span style="color:#ae81ff">10</span>

<span style="color:#66d9ef">var</span> lifeDescription = onesLife <span style="color:#f92672">&lt;</span> weightOfFeather ? <span style="color:#e6db74">&#34;lighter than a feather&#34;</span> : <span style="color:#e6db74">&#34;more than a feather&#34;</span>
print(<span style="color:#e6db74">&#34;Someone&#39;s life is </span><span style="color:#e6db74">\(</span>lifeDescription<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>)
<span style="color:#75715e">// Someone&#39;s life is lighter than a feather.</span>

lifeDescription = anotherOnesLife <span style="color:#f92672">&gt;</span> weightOfMountain ? <span style="color:#e6db74">&#34;heavier than a mountain&#34;</span> : <span style="color:#e6db74">&#34;less than a mountain&#34;</span>
print(<span style="color:#e6db74">&#34;Someone&#39;s life is </span><span style="color:#e6db74">\(</span>lifeDescription<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>)
<span style="color:#75715e">// Someone&#39;s life is heavier than a mountain.</span>
</code></pre></div><h3 id="loops">Loops</h3>
<blockquote>
<p>Endless Loop: n., see <strong>Loop</strong>, Endless.</p>
</blockquote>
<blockquote>
<p><strong>Loop</strong>, Endless: n., see Endless Loop.</p>
</blockquote>
<h4 id="while-loop"><code>while</code> Loop</h4>
<pre><code>while &lt;CONDITION&gt; {
    &lt;LOOP CODE&gt;
}
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> weekendStarts = <span style="color:#ae81ff">6</span>
<span style="color:#66d9ef">var</span> today = <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">while</span> today <span style="color:#f92672">&lt;</span> weekendStarts {
    print(<span style="color:#e6db74">&#34;Day </span><span style="color:#e6db74">\(</span>today<span style="color:#e6db74">)</span><span style="color:#e6db74">: start the day with a smile, after that you can be your nasty lazy but true self again.&#34;</span>)
    today <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
}
print(<span style="color:#e6db74">&#34;Day </span><span style="color:#e6db74">\(</span>today<span style="color:#e6db74">)</span><span style="color:#e6db74">: finally weekend&#34;</span>)
</code></pre></div><pre><code>repeat {
    &lt;LOOP CODE&gt;
} while &lt;CONDITION&gt;
</code></pre><blockquote>
<p>Children seldom misquote you. In fact, they usually <strong>repeat</strong> word for word what you shouldn&rsquo;t have said.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> waterInCup = <span style="color:#ae81ff">5</span>

<span style="color:#66d9ef">repeat</span> {
    <span style="color:#66d9ef">if</span> (waterInCup <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        print(<span style="color:#e6db74">&#34;Like this cup, you are full of opinions and speculations.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">To see the light of wisdom, you first must empty your cup before adding more.&#34;</span>)
        waterInCup <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
    }
} <span style="color:#66d9ef">while</span> waterInCup <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>
</code></pre></div><h4 id="for-loop"><code>for</code> Loop</h4>
<pre><code>for &lt;CONSTANT&gt; in &lt;COUNTABLE RANGE&gt; {
    &lt;LOOP CODE&gt;
}
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> totalVersions = <span style="color:#ae81ff">5</span>
<span style="color:#66d9ef">for</span> currentVersion <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..totalVersions {
    print(<span style="color:#e6db74">&#34;Current version: </span><span style="color:#e6db74">\(</span>currentVersion<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
</code></pre></div><p><strong>where</strong></p>
<blockquote>
<p>C++ : Where friends have access to your private members. &ndash; Gavin Russell Baker</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> versionNumberOfBadLuck = <span style="color:#ae81ff">4</span>
<span style="color:#66d9ef">for</span> currentVersion <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..totalVersions <span style="color:#66d9ef">where</span> currentVersion <span style="color:#f92672">!=</span> versionNumberOfBadLuck {
    print(<span style="color:#e6db74">&#34;Current version: </span><span style="color:#e6db74">\(</span>currentVersion<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
</code></pre></div><p><strong><code>continue</code> and Labeld Statements</strong></p>
<blockquote>
<p>Trust in what you love, <strong>continue</strong> to do it, and it will take you where you need to go. &ndash; Natalie Goldberg</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">for</span> currentVersion <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..totalVersions {
    <span style="color:#66d9ef">if</span> currentVersion == versionNumberOfBadLuck {
        print(<span style="color:#e6db74">&#34;We skip version </span><span style="color:#e6db74">\(</span>currentVersion<span style="color:#e6db74">)</span><span style="color:#e6db74"> to avoid bad luck.&#34;</span>)
        <span style="color:#66d9ef">continue</span> <span style="color:#75715e">// start next loop and ignore the remaining loop code</span>
    }
    print(<span style="color:#e6db74">&#34;Current version: </span><span style="color:#e6db74">\(</span>currentVersion<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Current version: 1</span>
<span style="color:#75715e">// Current version: 2</span>
<span style="color:#75715e">// Current version: 3</span>
<span style="color:#75715e">// We skip version 4 to avoid bad luck.</span>
<span style="color:#75715e">// Current version: 5</span>
</code></pre></div><p>Labeled statement lets you continue or break specific loop, this is useful for multi-layer loops.</p>
<p>Example: dating with different people:</p>
<ul>
<li>avoid dating if lover is wife&rsquo;s friend</li>
<li>dating with wife instead of lover</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> numberOfLovers = <span style="color:#ae81ff">3</span>
<span style="color:#66d9ef">let</span> datesPerLover = <span style="color:#ae81ff">2</span>
<span style="color:#66d9ef">let</span> wifesFriend = <span style="color:#ae81ff">2</span>
<span style="color:#66d9ef">let</span> datingWithWife = <span style="color:#ae81ff">1</span>

lover: <span style="color:#66d9ef">for</span> currentLover <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..numberOfLovers {
    date: <span style="color:#66d9ef">for</span> currentDate <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..datesPerLover {
        print(<span style="color:#e6db74">&#34;lover </span><span style="color:#e6db74">\(</span>currentLover<span style="color:#e6db74">)</span><span style="color:#e6db74"> date </span><span style="color:#e6db74">\(</span>currentDate<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#66d9ef">if</span> currentLover == wifesFriend {
            print(<span style="color:#e6db74">&#34;Do not date if lover is also wife&#39;s friend.&#34;</span>)
            <span style="color:#66d9ef">continue</span> lover
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> currentDate == datingWithWife {
            print(<span style="color:#e6db74">&#34;Go dating with wife instead.&#34;</span>)
            <span style="color:#66d9ef">continue</span> date
        }
        print(<span style="color:#e6db74">&#34;Dating with lover.&#34;</span>)
    }
}

<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// lover 1 date 1</span>
<span style="color:#75715e">// Go dating with wife instead.</span>
<span style="color:#75715e">// lover 1 date 2</span>
<span style="color:#75715e">// Dating with lover.</span>
<span style="color:#75715e">// lover 2 date 1</span>
<span style="color:#75715e">// Do not date if lover is also wife&#39;s friend.</span>
<span style="color:#75715e">// lover 3 date 1</span>
<span style="color:#75715e">// Go dating with wife instead.</span>
<span style="color:#75715e">// lover 3 date 2</span>
<span style="color:#75715e">// Dating with lover.</span>
</code></pre></div><h3 id="switch">Switch</h3>
<blockquote>
<p>There&rsquo;s no kill <strong>switch</strong> on awesome. &ndash; Dilbert (Scott Adams)</p>
</blockquote>
<ul>
<li><code>switch</code> determines which <code>case</code> the <em>switched</em> value matches</li>
<li>it works with any data types that can be compared</li>
</ul>
<pre><code>switch &lt;control expression&gt; {
case &lt;pattern 1&gt;:
    &lt;statements&gt;
case &lt;pattern 2&gt; where &lt;condition&gt;:
    &lt;statements&gt;
case &lt;pattern 3&gt; where &lt;condition&gt;,
     &lt;pattern 4&gt; where &lt;condition&gt;:
    &lt;statements&gt;
default:
    &lt;statements&gt;
}
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> occupied = <span style="color:#66d9ef">true</span>, unoccupied = <span style="color:#66d9ef">false</span>
<span style="color:#66d9ef">var</span> gender = <span style="color:#e6db74">&#34;boy&#34;</span> <span style="color:#75715e">// try changing it to &#34;girl&#34;</span>
<span style="color:#66d9ef">var</span> toiletOccupancy = (male: occupied, female: unoccupied) <span style="color:#75715e">// try changing occupied and unoccupied</span>

<span style="color:#66d9ef">switch</span> toiletOccupancy {
<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">let</span> (male, female) <span style="color:#66d9ef">where</span> male <span style="color:#f92672">!=</span> female:
    print(<span style="color:#e6db74">&#34;At least one toilet is empty&#34;</span>)
<span style="color:#66d9ef">fallthrough</span> <span style="color:#75715e">// continue the statements below</span>
<span style="color:#66d9ef">case</span> (male: <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">_</span>) <span style="color:#66d9ef">where</span> gender == <span style="color:#e6db74">&#34;boy&#34;</span>:
    <span style="color:#75715e">// male toilet is empty</span>
    <span style="color:#75715e">// and boys do not care about female toilet</span>
    print(<span style="color:#e6db74">&#34;boy can use toilet now&#34;</span>)
<span style="color:#66d9ef">case</span> (<span style="color:#66d9ef">_</span>, female: <span style="color:#66d9ef">true</span>) <span style="color:#66d9ef">where</span> gender == <span style="color:#e6db74">&#34;girl&#34;</span>:
    <span style="color:#75715e">// female toilet is empty</span>
    <span style="color:#75715e">// and girls do not care about male toilet</span>
    print(<span style="color:#e6db74">&#34;girl can use toilet now&#34;</span>)
<span style="color:#66d9ef">case</span> (male: <span style="color:#66d9ef">true</span>, female: <span style="color:#66d9ef">false</span>) <span style="color:#66d9ef">where</span> gender == <span style="color:#e6db74">&#34;girl&#34;</span>:
    print(<span style="color:#e6db74">&#34;girl has to use boy&#39;s toilet if urgent&#34;</span>)
<span style="color:#66d9ef">case</span> (male: <span style="color:#66d9ef">false</span>, female: <span style="color:#66d9ef">true</span>) <span style="color:#66d9ef">where</span> gender == <span style="color:#e6db74">&#34;boy&#34;</span>:
    print(<span style="color:#e6db74">&#34;boy has to use girl&#39;s toilet if urgent&#34;</span>)
<span style="color:#66d9ef">default</span>:
    <span style="color:#75715e">// **exhaustive**: every possible value of the control expression’s type</span>
    <span style="color:#75715e">// must match the value of at least one pattern of a case</span>
    <span style="color:#75715e">// `default case` can be used to satisfy this if it&#39;s not feasible.</span>
    <span style="color:#66d9ef">break</span>;
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> schoolYear = <span style="color:#ae81ff">3</span> <span style="color:#75715e">// try changing it to something within 1...12</span>
<span style="color:#66d9ef">switch</span> schoolYear {
<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1.</span>..<span style="color:#ae81ff">3</span>:
    print(<span style="color:#e6db74">&#34;You don&#39;t know you don&#39;t know.&#34;</span>)
<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">4.</span>..<span style="color:#ae81ff">6</span>:
    print(<span style="color:#e6db74">&#34;You know you don&#39;t know.&#34;</span>)
<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">7.</span>..<span style="color:#ae81ff">9</span>:
    print(<span style="color:#e6db74">&#34;You don&#39;t know you know.&#34;</span>)
<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">10.</span>..<span style="color:#ae81ff">12</span>:
    print(<span style="color:#e6db74">&#34;You know you know.&#34;</span>)
<span style="color:#66d9ef">default</span>:
    <span style="color:#75715e">// exhaustive: “every possible value of the control expression’s type</span>
    <span style="color:#75715e">// must match the value of at least one pattern of a case”</span>
    <span style="color:#75715e">// `default case` can be used to satisfy this if it&#39;s not feasible.</span>
    <span style="color:#66d9ef">break</span>
}
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="functions">Functions</h2>
<blockquote>
<p>Character is higher than intellect. Thinking is the <strong>function</strong>. Living is the functionary. The stream retreats to its source. A great soul will be strong to live, as well as strong to think. &ndash; Ralph Waldo Emerson</p>
</blockquote>
<pre><code>func &lt;function name&gt;(&lt;parameters&gt;) -&gt; &lt;return type&gt; {
    statements
}
</code></pre><p>If the function has a return type of <code>Void</code> (ie. no return value):</p>
<pre><code>func &lt;function name&gt;(&lt;parameters&gt;) {
    statements
}
</code></pre><p>Forms of a parameter:</p>
<pre><code>&lt;parameter name&gt;: &lt;parameter type&gt;
&lt;argument label&gt; &lt;parameter name&gt;: &lt;parameter type&gt;
_ &lt;parameter name&gt;: &lt;parameter type&gt;
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>(a: Int, b: Int) -&gt; Int {
    <span style="color:#66d9ef">return</span> x <span style="color:#f92672">+</span> y
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sayHi</span>(to person: String) {
    print(<span style="color:#e6db74">&#34;Hi, </span><span style="color:#e6db74">\(</span>person<span style="color:#e6db74">)</span><span style="color:#e6db74">!&#34;</span>)
}

sayHi(to: <span style="color:#e6db74">&#34;future&#34;</span>)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sayHi</span>(<span style="color:#66d9ef">_</span> person: String) {
    print(<span style="color:#e6db74">&#34;Hi, </span><span style="color:#e6db74">\(</span>person<span style="color:#e6db74">)</span><span style="color:#e6db74">!&#34;</span>)
}

sayHi(<span style="color:#e6db74">&#34;people&#34;</span>)
</code></pre></div><h4 id="change-a-parameter-directly">Change a parameter directly</h4>
<p>Terminology: copy-in copy-out, call by value result</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> vampiresAppetite = <span style="color:#ae81ff">0.4</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">payTax</span>(<span style="color:#66d9ef">for</span> income: <span style="color:#66d9ef">inout</span> Double) {
    income <span style="color:#f92672">*=</span> (<span style="color:#ae81ff">1.0</span> <span style="color:#f92672">-</span> vampiresAppetite)
}

<span style="color:#66d9ef">var</span> income = <span style="color:#ae81ff">100.00</span>
payTax(<span style="color:#66d9ef">for</span>: &amp;income)

print(<span style="color:#e6db74">&#34;After tax, income becomes </span><span style="color:#e6db74">\(</span>income<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// Prints &#34;After tax, income becomes 60.0&#34;</span>
</code></pre></div><h3 id="functions-as-variables">Functions as variables</h3>
<p>A function that takes a parameter, and returns another function that uses the parameter.</p>
<p>Example: define a generic function that returns a function mimicing money deduction behaviour with specified deduction rate</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">makeMoneyDeductor</span>(with percentage: Double) -&gt; ((Double) -&gt; Double) {
    <span style="color:#75715e">// define and return another function:</span>
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">bloodSuckingVampire</span>(bloodQuantity: Double) -&gt; Double {
        <span style="color:#66d9ef">return</span> bloodQuantity <span style="color:#f92672">*</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> percentage)
    }
    <span style="color:#66d9ef">return</span> bloodSuckingVampire
}

<span style="color:#66d9ef">let</span> taxOffice = makeMoneyDeductor(with: <span style="color:#ae81ff">0.3</span>)
<span style="color:#66d9ef">let</span> laywer = makeMoneyDeductor(with: <span style="color:#ae81ff">0.2</span>)
<span style="color:#66d9ef">let</span> dentist = makeMoneyDeductor(with: <span style="color:#ae81ff">0.1</span>)

income = <span style="color:#ae81ff">10_000.00</span>
print(<span style="color:#e6db74">&#34;Start with income </span><span style="color:#e6db74">\(</span>income<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
income = taxOffice(income)
income = laywer(income)
income = dentist(income)
print(<span style="color:#e6db74">&#34;After tax, laywer and dentist, now it becomes </span><span style="color:#e6db74">\(</span>income<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Start with income 10000.0</span>
<span style="color:#75715e">// After tax, laywer and dentist, now it becomes 5040.0</span>
</code></pre></div><h3 id="function-that-never-returns">Function that Never Returns</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">oneInfiniteLoop</span>() -&gt; Never {
    print(<span style="color:#e6db74">&#34;DO NOT CALL THIS FUNCTION OR:&#34;</span>)
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">true</span> {
        print(<span style="color:#e6db74">&#34;Falling apple on your head.&#34;</span>)
    }
}
</code></pre></div><h3 id="function-overloading">Function Overloading</h3>
<p>Function overloading is having several functions with the same name but different <em>signatures</em>, after all, the compiler must be able to know which function is invoked, at least one of the difference must exist:</p>
<ul>
<li>different number of parameters</li>
<li>different parameter types</li>
<li>different external parameter names</li>
<li>different return types</li>
</ul>
<h3 id="function-documentation">Function Documentation</h3>
<p><strong>Doxygen</strong> format is often used to document functions:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">/// Returns a substitution of something.</span>
<span style="color:#75715e">/// - Parameters:</span>
<span style="color:#75715e">///   - something: a string value of something</span>
<span style="color:#75715e">/// - Returns: &#34;lie&#34; if something is &#34;truth&#34;, a very poor substitute, but the only one discovered to date; returns the same thing otherwise</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">substitution</span>(of something: String) -&gt; String {
    <span style="color:#66d9ef">if</span> something == <span style="color:#e6db74">&#34;truth&#34;</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;lie&#34;</span>
    }
    <span style="color:#66d9ef">return</span> something
}
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="optionals">Optionals</h2>
<p>A variable holding either some value, or nothing.</p>
<blockquote>
<p>Money matters, but less than we think and not in the way we think. Family is important. So are friends. Envy is toxic. So is excessive thinking. Beaches are <strong>optional</strong>. Trust is not. Neither is gratitude. &ndash; Eric Weiner</p>
</blockquote>
<pre><code>&lt;Type&gt;?
</code></pre><p><code>nil</code> is the name given to the absense of a value.</p>
<blockquote>
<p>Accident, n.: a condition in which presence of mind is good, but <strong>absence</strong> of body is better.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> errorCode: Int?
errorCode = <span style="color:#ae81ff">404</span>
errorCode = <span style="color:#66d9ef">nil</span>
</code></pre></div><p><strong>unwrap optional</strong></p>
<p>To use the value that optional represents, it first need to be <em>unwrapped</em>.
<em>Optional binding</em> binds the value in an optional into a constant or variable, if the optional doesn&rsquo;t contain a avalue, the condition for <code>if</code> is <code>false</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> optionalDrink: String? = <span style="color:#e6db74">&#34;Beer&#34;</span>
print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>String<span style="color:#e6db74">(</span>describing: optionalDrink<span style="color:#e6db74">))</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// output: Optional(&#34;Beer&#34;)</span>
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> drink = optionalDrink {
    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>drink<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>) <span style="color:#75715e">// Beer</span>
}
</code></pre></div><p><strong>force unwrap</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">errorCode = <span style="color:#ae81ff">500</span>
print(<span style="color:#e6db74">&#34;Error code is </span><span style="color:#e6db74">\(</span>errorCode!<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><p>Both reference type and value type can be optional, they both represent the situation when the variable has no value. There&rsquo;s no such a concept in Objective-C, although a variable of reference type can be assigned <code>nil</code>, to indicate the variable has no (referenced) value.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="collection-types">Collection Types</h2>
<pre><code>Array[Element]
[Element] // short form
</code></pre><h3 id="array">Array</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> someNumbers = [Int]()

someNumbers.append(<span style="color:#ae81ff">9</span>)
someNumbers = [] <span style="color:#75715e">// type has been provided as `Int`</span>
</code></pre></div><h4 id="array-with-default-value">Array with default value</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> threeFloats = Array(repeating: <span style="color:#ae81ff">1.2</span>, count: <span style="color:#ae81ff">3</span>)
result: [<span style="color:#ae81ff">1.2</span>, <span style="color:#ae81ff">1.2</span>, <span style="color:#ae81ff">1.2</span>]
</code></pre></div><h4 id="adding-two-array-together">Adding two array together</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> threePowers = [<span style="color:#e6db74">&#34;Executive&#34;</span>, <span style="color:#e6db74">&#34;Legislative&#34;</span>, <span style="color:#e6db74">&#34;Judicial&#34;</span>]
<span style="color:#66d9ef">let</span> twoPowers = [<span style="color:#e6db74">&#34;Supervision Audit&#34;</span>, <span style="color:#e6db74">&#34;Examination&#34;</span>]
<span style="color:#66d9ef">let</span> fivePowers = threePowers <span style="color:#f92672">+</span> twoPowers
</code></pre></div><h4 id="accessing-and-modifying-array">Accessing and modifying array</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> shoppingList = [<span style="color:#e6db74">&#34;Wine&#34;</span>, <span style="color:#e6db74">&#34;Coffee&#34;</span>, <span style="color:#e6db74">&#34;Cigarette&#34;</span>]
print(<span style="color:#e6db74">&#34;Shopping list has </span><span style="color:#e6db74">\(</span>shoppingList.count<span style="color:#e6db74">)</span><span style="color:#e6db74"> items&#34;</span>)

<span style="color:#66d9ef">if</span> shoppingList.isEmpty {
    print(<span style="color:#e6db74">&#34;Shopping list is empty&#34;</span>)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;Shopping list isn&#39;t empty&#34;</span>)
}

shoppingList.append(<span style="color:#e6db74">&#34;Panado&#34;</span>)
shoppingList <span style="color:#f92672">+=</span> [<span style="color:#e6db74">&#34;Meat&#34;</span>, <span style="color:#e6db74">&#34;Tea&#34;</span>]

<span style="color:#66d9ef">var</span> firstItem = shoppingList[<span style="color:#ae81ff">0</span>]

shoppingList[<span style="color:#ae81ff">3</span>] = <span style="color:#e6db74">&#34;Egg&#34;</span>
shoppingList[<span style="color:#ae81ff">3.</span>..<span style="color:#ae81ff">4</span>] = [<span style="color:#e6db74">&#34;Energy Drink&#34;</span>]
shoppingList: [<span style="color:#e6db74">&#34;Wine&#34;</span>, <span style="color:#e6db74">&#34;Coffee&#34;</span>, <span style="color:#e6db74">&#34;Cigarette&#34;</span>, <span style="color:#e6db74">&#34;Energy Drink&#34;</span>, <span style="color:#e6db74">&#34;Tea&#34;</span>]

shoppingList.insert(<span style="color:#e6db74">&#34;Honey&#34;</span>, at: <span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">let</span> honey = shoppingList.remove(at: <span style="color:#ae81ff">0</span>)
</code></pre></div><h4 id="iterating-over-an-array">Iterating Over an Array</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">for</span> item <span style="color:#66d9ef">in</span> shoppingList {
    print(<span style="color:#e6db74">&#34;Shopping list item: </span><span style="color:#e6db74">\(</span>item<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}

<span style="color:#75715e">// iterating with index</span>
<span style="color:#66d9ef">for</span> (index, item) <span style="color:#66d9ef">in</span> shoppingList.enumerated() {
    print(<span style="color:#e6db74">&#34;Shopping list item </span><span style="color:#e6db74">\(</span>index<span style="color:#e6db74">)</span><span style="color:#e6db74">: </span><span style="color:#e6db74">\(</span>item<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
</code></pre></div><h4 id="implementation">Implementation</h4>
<p><code>Array</code> in Swift combines and replaces <code>NSArray</code> and <code>NSMutalbeArray</code> in Objective-C, there are several kinds of arrays.</p>
<ul>
<li><code>ContiguousArray&lt;Element&gt;</code>: a specialized array that always stores its elements in a contiguous region of memory, this is the most efficient implementation.</li>
<li><code>Array&lt;Element&gt;</code>: store its elements in either a contiguous region of memory or an NSArray instance if its Element type is a class or @objc protocol.</li>
<li><code>ArraySlice&lt;Element&gt;</code>: a slice of an Array, ContiguousArray, or ArraySlice instance, it represents a view onto the storage of a larger array instead of copying over elements into a new storage.</li>
</ul>
<h4 id="copy-on-write">copy-on-write</h4>
<p><em>tip</em>: When value-type is copied, the copied version still points to the same memory location as the original version, only when copied version is modified, a new memory region is allocated for the copied version. This means that memory footprint of copied value type only increases when copied value changes, this ensures maximum efficiency of memory usage.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h3 id="set">Set</h3>
<h4 id="hash-value-for-set-types">Hash Value for Set Types</h4>
<p><code>Set</code> can only contain <em>hashable</em> values
if <code>a == b</code>, then <code>a.hashValue == b.hashValue</code></p>
<h4 id="creating-sets">Creating Sets</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> letters = Set&lt;Character&gt;()
letters.insert(<span style="color:#e6db74">&#34;a&#34;</span>)
letters = []
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> someColors: Set&lt;String&gt; = [<span style="color:#e6db74">&#34;Blue&#34;</span>, <span style="color:#e6db74">&#34;White&#34;</span>, <span style="color:#e6db74">&#34;Red&#34;</span>]
<span style="color:#66d9ef">var</span> someOtherColors: Set = [<span style="color:#e6db74">&#34;Sunset&#34;</span>, <span style="color:#e6db74">&#34;Autumn&#34;</span>, <span style="color:#e6db74">&#34;Zen&#34;</span>]
</code></pre></div><h4 id="operations">Operations</h4>
<p><strong>Count</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">print(<span style="color:#e6db74">&#34;Other colors have </span><span style="color:#e6db74">\(</span>someOtherColors.count<span style="color:#e6db74">)</span><span style="color:#e6db74"> colors&#34;</span>)
</code></pre></div><p><strong>Check Empty</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> someOtherColors.isEmpty {
    print(<span style="color:#e6db74">&#34;No color, is the real color.&#34;</span>)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;There are a few colors in it.&#34;</span>)
}
</code></pre></div><p><strong>Insert and Remove</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">someColors.insert(<span style="color:#e6db74">&#34;Cyan&#34;</span>)
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> removedColor = someColors.remove(<span style="color:#e6db74">&#34;Yellow&#34;</span>) {
    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>removedColor<span style="color:#e6db74">)</span><span style="color:#e6db74"> removed from someColors&#34;</span>)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;someColors does not have Yellow in it&#34;</span>)
}
</code></pre></div><p><strong>Union and Intersection</strong></p>
<pre><code>let openDays: Set = [1, 2, 3, 4, 5]
let closedDays: Set = [6, 7]
openDays.union(closedDays)
openDays.intersection(closedDays)
</code></pre><p>Example: given an array of numbers and a target value, determine whether the array has two numbers whose sum equals to the target value</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">twoSum</span>(numbers: [Int], <span style="color:#66d9ef">_</span> target: Int) -&gt; Bool {
    <span style="color:#66d9ef">var</span> set = Set&lt;Int&gt;()

    <span style="color:#66d9ef">for</span> number <span style="color:#66d9ef">in</span> numbers {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">set</span>.contains(target <span style="color:#f92672">-</span> number) {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        }
        <span style="color:#66d9ef">set</span>.insert(number)
    }
    
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">twoSumIndices</span>(numbers: [Int], <span style="color:#66d9ef">_</span> target: Int) -&gt; (Int, Int)? {
    <span style="color:#66d9ef">var</span> dict = [Int: Int]()
    <span style="color:#66d9ef">for</span> (index, number) <span style="color:#66d9ef">in</span> numbers.enumerated() {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> lastIndex = dict[target <span style="color:#f92672">-</span> number] {
            <span style="color:#66d9ef">return</span> (lastIndex, index)
        } <span style="color:#66d9ef">else</span> {
            dict[number] = index
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}
</code></pre></div><p>Many collection types as well as other types (e.g. <code>String</code>) are reference type in Objective-C but value type in Swift, the reasons are:</p>
<ul>
<li>value type can make memory usage more efficient, value types are stored on stack whereas reference types are stored on heap. Copy-on-write makes sure minimum memory overhead</li>
<li>value type defined as <code>let</code> are immutable, which increases thread-safety</li>
</ul>
<p><a href="#table-of-contents">ToC</a></p>
<h3 id="dictionary">Dictionary</h3>
<h4 id="creating-a-dictionary">Creating a Dictionary</h4>
<p>Dictionary in Swift can be created using <em>dictionary literal</em>, which is a list of key-value pairs separated by commas, inside square brackets.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// creating empty dictionary:</span>
<span style="color:#66d9ef">var</span> meaningsOfAges = [String: String]()
meaningsOfAges[<span style="color:#e6db74">&#34;eighteen&#34;</span>] = <span style="color:#e6db74">&#34;By which the acquired collection of prejudices become common sense&#34;</span>
</code></pre></div><pre><code>// creating with dictionary literal:
var meaningOfWords = [&quot;agreement&quot;: &quot;when people are tired of thinking&quot;]
// `String` type inferred for `var meaningOfWords: [String: String]`
</code></pre><h4 id="dictionary-operations">Dictionary operations</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> meaningsOfAges.isEmpty == <span style="color:#66d9ef">false</span> {
    print(<span style="color:#e6db74">&#34;At least one age has some meaning&#34;</span>)
}

meaningsOfAges[<span style="color:#e6db74">&#34;four&#34;</span>] = <span style="color:#e6db74">&#34;at which we know all the questions&#34;</span>
meaningsOfAges[<span style="color:#e6db74">&#34;eighteen&#34;</span>] = <span style="color:#e6db74">&#34;at which we know all the answers&#34;</span>

<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> meaningOf18 = meaningsOfAges[<span style="color:#e6db74">&#34;eighteen&#34;</span>] {
    print(<span style="color:#e6db74">&#34;The meaning of age 18:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">\(</span>meaningOf18<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Meaning of eighteen: at which we know all the answers</span>
</code></pre></div><h4 id="iterating-over-a-dictionary">Iterating Over a Dictionary</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">for</span> (age, meaning) <span style="color:#66d9ef">in</span> meaningsOfAges {
    print(<span style="color:#e6db74">&#34;Meaning of </span><span style="color:#e6db74">\(</span>age<span style="color:#e6db74">)</span><span style="color:#e6db74">: </span><span style="color:#e6db74">\(</span>meaning<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Meaning of four: at which we know all the questions</span>
<span style="color:#75715e">// Meaning of eighteen: at which we know all the answers</span>
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="closures">Closures</h2>
<p>Function without name:</p>
<pre><code>{ (&lt;parameters&gt;) -&gt; &lt;return type&gt; in
    statement
}
</code></pre><blockquote>
<p>I go on working for the same reason a hen goes on laying eggs. &ndash; H. L. Mencken</p>
</blockquote>
<p>For a long time the question exists that whether egg came first or chicken came first, we can figure it out using closure:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> matters = [<span style="color:#e6db74">&#34;🥚&#34;</span>, <span style="color:#e6db74">&#34;🐓&#34;</span>]
<span style="color:#66d9ef">let</span> sortedMatters = matters.sorted(by: { (m1: String, m2: String) -&gt; Bool <span style="color:#66d9ef">in</span>
    m1 <span style="color:#f92672">&lt;</span> m2
})
print(<span style="color:#e6db74">&#34;first there&#39;s </span><span style="color:#e6db74">\(</span>String<span style="color:#e6db74">(</span>describing: sortedMatters.first!<span style="color:#e6db74">))</span><span style="color:#e6db74">&#34;</span>)
print(<span style="color:#e6db74">&#34;then there comes </span><span style="color:#e6db74">\(</span>String<span style="color:#e6db74">(</span>describing: sortedMatters.last!<span style="color:#e6db74">))</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="inferring-type-from-context">Inferring type from context</h3>
<p>without parameter type:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">matters.sorted { (m1, m2) -&gt; Bool <span style="color:#66d9ef">in</span>
    m1 <span style="color:#f92672">&gt;</span> m2
}
</code></pre></div><p>without return type:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">matters.sorted { (m1, m2) <span style="color:#66d9ef">in</span> m1 <span style="color:#f92672">&gt;</span> m2 }
</code></pre></div><p>shorthand argument names:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">matters.sorted { $0 <span style="color:#f92672">&gt;</span> $1 }
</code></pre></div><p>operator methods:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">matters.sorted(by: <span style="color:#f92672">&gt;</span>)
</code></pre></div><p>As a result, chicken and egg must exist at the same time for the comparison to work!</p>
<ul>
<li>a closure can <em>capture</em> constants and variables from the surrounding context in which it is defined.</li>
<li>closures are reference types</li>
</ul>
<h3 id="escaping-closures">Escaping closures</h3>
<p>A closure is said to <em>escape</em> a function when the closure is passed as an argument to the function,
but is called after the function returns.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> executionGround: [() -&gt; Void] = []

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">executionSuspended</span>(prisonerExecution: @escaping () -&gt; Void) {
    executionGround.append(prisonerExecution)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">executionImmediate</span>(prisonerExecution: () -&gt; Void) {
    prisonerExecution() <span style="color:#75715e">// execute immediately</span>
}

executionSuspended {
    print(<span style="color:#e6db74">&#34;Summer is here, will autumn be far away?&#34;</span>)
}

executionImmediate {
    print(<span style="color:#e6db74">&#34;Don&#39;t laugh if I lay drunken on the battleground, how many warriors ever came back safe and sound?&#34;</span>)
    <span style="color:#75715e">// only this is executed</span>
}
</code></pre></div><h3 id="autoclosures">Autoclosures</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> toBeInDinnerPlate = [<span style="color:#e6db74">&#34;Chicken&#34;</span>, <span style="color:#e6db74">&#34;Duck&#34;</span>, <span style="color:#e6db74">&#34;Fish&#34;</span>, <span style="color:#e6db74">&#34;Pork&#34;</span>]
print(toBeInDinnerPlate.count) <span style="color:#75715e">// Prints &#34;4&#34;</span>

<span style="color:#66d9ef">let</span> dinnerProvider = { toBeInDinnerPlate.remove(at: <span style="color:#ae81ff">0</span>) }
print(toBeInDinnerPlate.count) <span style="color:#75715e">// Prints &#34;4&#34;</span>

print(<span style="color:#e6db74">&#34;Now serving </span><span style="color:#e6db74">\(</span>dinnerProvider<span style="color:#e6db74">())</span><span style="color:#e6db74">!&#34;</span>)
<span style="color:#75715e">// Prints &#34;Now serving Chicken!&#34;</span>
print(toBeInDinnerPlate.count) <span style="color:#75715e">// Prints &#34;3&#34;</span>

<span style="color:#75715e">// parameter: () -&gt; String</span>
<span style="color:#75715e">// argument is auto converted to a closure</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">serve</span>(dinner provider: <span style="color:#66d9ef">@autoclosure</span> () -&gt; String) {
    print(<span style="color:#e6db74">&#34;Now serving </span><span style="color:#e6db74">\(</span>provider<span style="color:#e6db74">())</span><span style="color:#e6db74">!&#34;</span>)
}

<span style="color:#75715e">// now can pass a String</span>
serve(dinner: <span style="color:#e6db74">&#34;Vegetable&#34;</span>)
<span style="color:#75715e">// &#34;Vegetable&#34; will be converted to a closure that returns this string</span>
<span style="color:#75715e">// which is only evaluated when being called</span>
</code></pre></div><p>Example of autoclosure: implement OR (||) operation.</p>
<p>Flawed version:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#f92672">||</span>(<span style="color:#66d9ef">left</span>: Bool, <span style="color:#66d9ef">right</span>: Bool) -&gt; Bool {
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">left</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">right</span>
    }
}
</code></pre></div><p>The problem with above implementation is that both <code>left</code> and <code>right</code> sides are evaluated when <code>left</code> is <code>true</code>, so there&rsquo;s a better implementation using autoclosure:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#f92672">||</span>(<span style="color:#66d9ef">left</span>: Bool, <span style="color:#66d9ef">right</span>: <span style="color:#66d9ef">@autoclosure</span> () -&gt; Bool) -&gt; Bool {
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">left</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">right</span>()
    }
}
</code></pre></div><h3 id="higher-order-functions">Higher Order Functions</h3>
<p>Closures in Swift enable higher order functions, which are functions that can either accept functions or closures as arguments, and/or return a function/closure.</p>
<p>Swift has built-in support for things that are common in functional programming, such like <code>map</code>, <code>reduce</code>, <code>filter</code> and <code>compactMap</code>, which allows developer to focus only on results without having to write boiler-plate code. In this regard, Swift is both object-oriented and functional programming language.</p>
<p>In this regard, Swift is both object-oriented and functional programming language.</p>
<p>Example: due to the support of functional closures, many problems can be solved funtionally. For example, get all numbers between 0 to 100 that are 1. even and 2. squares of other numbers</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">(<span style="color:#ae81ff">0.</span>..<span style="color:#ae81ff">10</span>).map { $0 <span style="color:#f92672">*</span> $0 }.filter { $0 <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> == <span style="color:#ae81ff">0</span> }
</code></pre></div><p>Functional composition in mathematical term is to combine multiple functions into one function, the idea behind functional composition in Swift is applying one function to the result of another function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">unique</span>(<span style="color:#66d9ef">_</span> array: [Int]) -&gt; [Int] {
    <span style="color:#66d9ef">return</span> array.reduce(into: []) { (result, number) <span style="color:#66d9ef">in</span>
        <span style="color:#66d9ef">if</span> result.contains(number) == <span style="color:#66d9ef">false</span> {
            result.append(number)
        }
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">even</span>(<span style="color:#66d9ef">_</span> array: [Int]) -&gt; [Int] {
    <span style="color:#66d9ef">return</span> array.filter { $0 <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> == <span style="color:#ae81ff">0</span> }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">_</span> array: [Int]) -&gt; [Int] {
    <span style="color:#66d9ef">return</span> array.map { $0 <span style="color:#f92672">*</span> $0 }
}

precedencegroup Group { <span style="color:#66d9ef">associativity</span>: <span style="color:#66d9ef">left</span> }
<span style="color:#66d9ef">infix</span> <span style="color:#66d9ef">operator</span> <span style="color:#f92672">&gt;&gt;&gt;</span> : Group
<span style="color:#66d9ef">func</span> <span style="color:#f92672">&gt;&gt;&gt;&lt;</span>T, U, V&gt;(<span style="color:#66d9ef">left</span>: @escaping (T) -&gt; U, <span style="color:#66d9ef">right</span>: @escaping (U) -&gt; V) -&gt; ((T) -&gt; V) {
    <span style="color:#66d9ef">return</span> { <span style="color:#66d9ef">right</span>(<span style="color:#66d9ef">left</span>($0)) }
}

<span style="color:#66d9ef">let</span> testIntArray = [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]
<span style="color:#66d9ef">var</span> resultArray = (unique <span style="color:#f92672">&gt;&gt;&gt;</span> even <span style="color:#f92672">&gt;&gt;&gt;</span> square)(testIntArray)
print(<span style="color:#e6db74">&#34;result: </span><span style="color:#e6db74">\(</span>resultArray<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h4 id="map">map</h4>
<p>Map can be used to loop over a collection and apply the same operation to each element in the collection.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> numberOfMonks = [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
<span style="color:#66d9ef">let</span> hasWaterToDrink: [(Int, Bool)] = numberOfMonks.map { monks <span style="color:#66d9ef">in</span>
    <span style="color:#66d9ef">return</span> (monks, monks <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>)
}
hasWaterToDrink.forEach { (numberOfMonks, hasWater) <span style="color:#66d9ef">in</span>
    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>numberOfMonks<span style="color:#e6db74">)</span><span style="color:#e6db74"> monks, water to drink? </span><span style="color:#e6db74">\(</span>hasWater ? <span style="color:#e6db74">&#34;YES&#34;</span> : <span style="color:#e6db74">&#34;NO&#34;</span><span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// 1 monks, water to drink? YES</span>
<span style="color:#75715e">// 2 monks, water to drink? YES</span>
<span style="color:#75715e">// 3 monks, water to drink? NO</span>
</code></pre></div><h4 id="compactmap--flatmap">compactMap / flatMap</h4>
<p><code>compactMap</code> is the same as <code>map</code> but also handles optionals.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> couldBeNumbers = [<span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#e6db74">&#34;3&#34;</span>, <span style="color:#e6db74">&#34;five&#34;</span>, <span style="color:#e6db74">&#34;12&#34;</span>]
<span style="color:#66d9ef">let</span> compactedNumbers = couldBeNumbers.compactMap { Int($0) }
print(compactedNumbers)
<span style="color:#75715e">// result: [1, 3, 12]</span>
<span style="color:#66d9ef">let</span> mappedNumbers = couldBeNumbers.map { Int($0) }
print(mappedNumbers)
<span style="color:#75715e">// result: [Optional(1), Optional(3), nil, Optional(12)]</span>
</code></pre></div><p><code>flatMap</code> is to receive a single-level collection when each element is a sequence or collection:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> bloodTemperatureByGroup = [<span style="color:#e6db74">&#34;A&#34;</span>: [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">36</span>, <span style="color:#ae81ff">48</span>], <span style="color:#e6db74">&#34;B&#34;</span>: [<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">39</span>]]
<span style="color:#66d9ef">let</span> temperaturesMapped = bloodTemperatureByGroup.map { $0.value }
print(temperaturesMapped)
<span style="color:#75715e">// output: [[12, 32, 39], [0, 36, 48]]</span>
<span style="color:#66d9ef">let</span> temperaturesFlatened = bloodTemperatureByGroup.flatMap { $0.value }
print(temperaturesFlatened)
<span style="color:#75715e">// output: [12, 32, 39, 0, 36, 48]</span>
</code></pre></div><p>General rule: use <code>compactMap</code> for mapping a sequence and mapped result could be an optional value; If not, use either map or flatMap depending on the form of result expected.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="strings-and-characters">Strings and Characters</h2>
<ul>
<li>string literals can be single or multi line</li>
<li>backslash () can be used to make the string easier to read but won&rsquo;t have line break in the final string</li>
<li>blank line as the first and/or last line in multiline string as line feed</li>
<li>indentation is only considered after the indentation of triple quotation marks</li>
<li>special characters are espaced with backslash</li>
<li>unicode can be written with \u{<CodePoint>}</li>
<li>strings are value types</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> quotationSingleLine = <span style="color:#e6db74">&#34;There be light.&#34;</span>
<span style="color:#66d9ef">let</span> quotationMultiLine = <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">And God said, \
</span><span style="color:#e6db74">Let there be light:
</span><span style="color:#e6db74">and there was light.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</code></pre></div><p>final string:</p>
<pre><code>And God said, Let there be light:
and there was light.
</code></pre><h3 id="create-emtpy-string">Create emtpy string</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> emptyString = <span style="color:#e6db74">&#34;&#34;</span>
<span style="color:#66d9ef">var</span> anotherEmptyString = String()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> emptyString.isEmpty {
    print(<span style="color:#e6db74">&#34;Unfortunately the emptiness of a string can&#39;t be derived from its name.&#34;</span>)
}
</code></pre></div><p>You can do this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">emptyString <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;no longer empty&#34;</span>
</code></pre></div><h3 id="strings-are-sequence-of-characters">Strings are sequence of characters</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">for</span> character <span style="color:#66d9ef">in</span> <span style="color:#e6db74">&#34;Dog🐶Inside!&#34;</span> {
    print(character)
}

<span style="color:#66d9ef">let</span> nethackCharacters: [Character] = [<span style="color:#e6db74">&#34;T&#34;</span>, <span style="color:#e6db74">&#34;h&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#e6db74">&#34;n&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>, <span style="color:#e6db74">&#34;t&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;i&#34;</span>, <span style="color:#e6db74">&#34;t&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;s&#34;</span>]
<span style="color:#66d9ef">var</span> nethackString = String(nethackCharacters)
print(nethackString)
<span style="color:#75715e">// Prints &#34;The newt bites&#34;</span>

nethackString <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;!&#34;</span>
</code></pre></div><h3 id="unicode">Unicode</h3>
<p>Unicode is an international standard for encoding text in different languages, it covers much more than the original ASCII character set, however the underlying representation are still integers. Integers within certain ranges (U+0000 to U+D7FF inclusive, U+E000 to U+10FFFF inclusive) are called Unicode Scalars.</p>
<h3 id="extended-grapheme-clusters">Extended grapheme clusters</h3>
<p>Every instance of Swift’s Character type represents a single extended grapheme cluster. An extended grapheme cluster is a sequence of one or more Unicode scalars that (when combined) produce a single human-readable character.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> eAcute: Character = <span style="color:#e6db74">&#34;\u{E9}&#34;</span>
<span style="color:#75715e">// é</span>

<span style="color:#66d9ef">let</span> combinedEAcute: Character = <span style="color:#e6db74">&#34;\u{65}\u{301}&#34;</span>
<span style="color:#75715e">// e followed by  ́ (the thing above e)</span>
</code></pre></div><h3 id="accessing-and-modifying-a-string">Accessing and Modifying a String</h3>
<p>Because a character in Unicode may consist of more than one number, anything related to indices, inculding counting the number of characters in a string, becomes tricky. A swift string can&rsquo;t be indexed by integer values, the type of index is <code>String.Index</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> word = <span style="color:#e6db74">&#34;cafe&#34;</span>
word.count <span style="color:#75715e">// 4</span>
word <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;\u{301}&#34;</span>
word.count <span style="color:#75715e">// word is now &#34;café&#34; but count is still 4</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> science = <span style="color:#e6db74">&#34;ABCDEFGHIJKMNPQRTVWXYZ&#34;</span>
print(science[science.startIndex]) <span style="color:#75715e">// A</span>
print(science[science.index(before: science.endIndex)]) <span style="color:#75715e">// Z</span>
print(science[science.index(after: science.startIndex)]) <span style="color:#75715e">// B</span>
<span style="color:#66d9ef">let</span> index7 = science.index(science.startIndex, offsetBy: <span style="color:#ae81ff">7</span>)
print(science[index7]) <span style="color:#75715e">// H</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> indexS: String.Index? = science.firstIndex(of: <span style="color:#e6db74">&#34;S&#34;</span>)
<span style="color:#66d9ef">var</span> indexO: String.Index? = science.firstIndex(of: <span style="color:#e6db74">&#34;O&#34;</span>)
<span style="color:#66d9ef">var</span> indexU: String.Index? = science.firstIndex(of: <span style="color:#e6db74">&#34;U&#34;</span>)
<span style="color:#66d9ef">var</span> indexL: String.Index? = science.firstIndex(of: <span style="color:#e6db74">&#34;L&#34;</span>)

<span style="color:#66d9ef">if</span> (indexS == <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> indexO == <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> indexU == <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> indexL == <span style="color:#66d9ef">nil</span>) {
    print(<span style="color:#e6db74">&#34;science has no SOUL&#34;</span>)
}
</code></pre></div><h4 id="inserting">inserting</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> sentence = <span style="color:#e6db74">&#34;you understand&#34;</span>
sentence.insert(contentsOf: <span style="color:#e6db74">&#34;could &#34;</span>, at: sentence.startIndex)
sentence.insert(contentsOf: <span style="color:#e6db74">&#34;?&#34;</span>, at: sentence.endIndex)
print(sentence)
<span style="color:#75715e">// Print: &#34;could you understand?&#34;</span>
</code></pre></div><h4 id="replacing">replacing</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> range1 = sentence.range(of: <span style="color:#e6db74">&#34;oul&#34;</span>)<span style="color:#f92672">!</span>
sentence.replaceSubrange(range1, with: <span style="color:#e6db74">&#34;ulo&#34;</span>)
<span style="color:#66d9ef">let</span> range2 = sentence.range(of: <span style="color:#e6db74">&#34;nderstan&#34;</span>)<span style="color:#f92672">!</span>
sentence.replaceSubrange(range2, with: <span style="color:#e6db74">&#34;redntsna&#34;</span>)
print(sentence)
<span style="color:#75715e">// Prints: &#34;culod you uredntsnad?&#34;</span>
</code></pre></div><h4 id="substrings">substrings</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> englishForDummy = <span style="color:#e6db74">&#34;therapist&#34;</span>
<span style="color:#66d9ef">let</span> indexOfR = englishForDummy.firstIndex(of: <span style="color:#e6db74">&#34;r&#34;</span>)<span style="color:#f92672">!</span>
<span style="color:#66d9ef">let</span> firstWord = englishForDummy[..&lt;indexOfR]
<span style="color:#66d9ef">let</span> lastWord = englishForDummy[indexOfR...]
print(<span style="color:#e6db74">&#34;Have you ever realised the word </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>englishForDummy<span style="color:#e6db74">)</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74"> is made up by </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>String<span style="color:#e6db74">(</span>firstWord<span style="color:#e6db74">))</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74"> and </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>String<span style="color:#e6db74">(</span>lastWord<span style="color:#e6db74">))</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">?&#34;</span>)
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Have you ever realised the word &#34;therapist&#34; is made up by &#34;the&#34; and &#34;rapist&#34;?</span>
</code></pre></div><p>Exercise: given a string, return another string which is a reverse of given string by words,
e.g. <code>what the f**k</code> becomes <code>f**k the what</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">reverse</span>&lt;T&gt;(<span style="color:#66d9ef">_</span> things: <span style="color:#66d9ef">inout</span> [T], <span style="color:#66d9ef">_</span> start: Int, <span style="color:#66d9ef">_</span> end: Int) {
    <span style="color:#66d9ef">var</span> startIndex = start, endIndex = end
    <span style="color:#66d9ef">while</span> startIndex <span style="color:#f92672">&lt;</span> endIndex {
        (things[startIndex], things[endIndex]) = (things[endIndex], things[startIndex])
        startIndex <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        endIndex <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">reverseWords</span>(<span style="color:#66d9ef">_</span> s: String?) -&gt; String? {
    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> s = s <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
    }
    
    <span style="color:#66d9ef">var</span> mutableString = Array(s), start = <span style="color:#ae81ff">0</span>
    reverse(&amp;mutableString, <span style="color:#ae81ff">0</span>, mutableString.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">0.</span>.&lt;mutableString.count {
        <span style="color:#66d9ef">if</span> i == mutableString.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> mutableString[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] == <span style="color:#e6db74">&#34; &#34;</span> {
            reverse(&amp;mutableString, start, i)
            start = i <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>
        }
    }
    
    <span style="color:#66d9ef">return</span> String(mutableString)
}

reverseWords(<span style="color:#e6db74">&#34;what the f**k&#34;</span>)
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// f**k the what</span>
</code></pre></div><p>Note: a simpler way to solve above problem is to use <code>components(separatedBy:)</code> and <code>joined(separator:)</code>.</p>
<h3 id="raw-strings">Raw strings</h3>
<p>To avoid special characters or string interpolation, use <em>raw string</em>.</p>
<blockquote>
<p>There is a tendency to mistake data for wisdom, just as there has always been a tendency to confuse logic with values, intelligence with insight. Unobstructed access to facts can produce unlimited good only if it is matched by the desire and ability to find out what they mean and where they lead. Facts are terrible things if left sprawling and unattended. They are too easily regarded as evaluated certainties rather than as the rawest of <strong>raw</strong> materials crying to be processed into the texture of logic. &ndash; Norman Cousins</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> raw1 = #<span style="color:#e6db74">&#34;Eating &#34;</span>raw<span style="color:#e6db74">&#34; fish will not </span><span style="color:#e6db74">\(</span>interpolate<span style="color:#e6db74">)</span><span style="color:#e6db74"> the string including slash </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">#
</span><span style="color:#e6db74">let raw2 = ##&#34;</span>Use # <span style="color:#66d9ef">in</span> raw string <span style="color:#66d9ef">is</span> also possible <span style="color:#66d9ef">as</span> long <span style="color:#66d9ef">as</span> the open and close hashes match!<span style="color:#e6db74">&#34;##
</span><span style="color:#e6db74">let raw3 = #&#34;</span>You can also use raw <span style="color:#66d9ef">in</span> raw: <span style="color:#960050;background-color:#1e0010">\</span>#(raw1)<span style="color:#e6db74">&#34;#
</span></code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="enumerations">Enumerations</h2>
<blockquote>
<p>the average pencil is seven inches long, with just a half-inch eraser-in <strong>case</strong> you thought optimism was dead. &ndash; Robert Brault</p>
</blockquote>
<p>Some history regarding switch-case - in case you need to show off your knowledge to friends:
//
In his 1952 text Introduction to Metamathematics, Stephen Kleene formally proved that the CASE function (the IF-THEN-ELSE function being its simplest form) is a primitive recursive function.
//</p>
<h3 id="syntax">Syntax</h3>
<pre><code>enum &lt;enumeration name&gt; {
    &lt;enumeration definitions&gt;
}
</code></pre><p>each case can be a single line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">PlanetVertical</span> {
    <span style="color:#66d9ef">case</span> mercury
    <span style="color:#66d9ef">case</span> venus
    <span style="color:#66d9ef">case</span> earth
    <span style="color:#66d9ef">case</span> mars
    <span style="color:#66d9ef">case</span> jupiter
    <span style="color:#66d9ef">case</span> saturn
    <span style="color:#66d9ef">case</span> uranus
    <span style="color:#66d9ef">case</span> neptune
}
</code></pre></div><p>or multiple cases can appear on a single line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">PlanetHorizontal</span> {
    <span style="color:#66d9ef">case</span> mercury, venus, earth, mars, jupiter, saturn, uranus, neptune
}
</code></pre></div><p>enumeration type can be inferred</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Direction</span> {
    <span style="color:#66d9ef">case</span> north
    <span style="color:#66d9ef">case</span> west
    <span style="color:#66d9ef">case</span> south
    <span style="color:#66d9ef">case</span> east
}

<span style="color:#66d9ef">var</span> lostDirection: Direction = .north
<span style="color:#66d9ef">var</span> nextDirection = Direction.east

lostDirection = .north
nextDirection = .west
</code></pre></div><h3 id="switch-matching">Switch matching</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">switch</span> lostDirection {
<span style="color:#66d9ef">case</span> .north, .west, .south:
    print(<span style="color:#e6db74">&#34;Lost in the wild&#34;</span>)
<span style="color:#66d9ef">case</span> .east:
    print(<span style="color:#e6db74">&#34;You need a pilot&#34;</span>)
}
</code></pre></div><p>Remember <code>switch</code> must be exhaustive</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">switch</span> nextDirection {
<span style="color:#66d9ef">case</span> .east:
    print(<span style="color:#e6db74">&#34;Be prepared.&#34;</span>)
<span style="color:#66d9ef">default</span>:
    print(<span style="color:#e6db74">&#34;Why not heading east?&#34;</span>)
}
</code></pre></div><h3 id="associated-values">Associated Values</h3>
<p>Example:</p>
<p>Define an enumeration for daily attendence,
if unattended, give and execuse as well as a real reason,
define three functions, evaluate the execuse and reason for unattendence,
from perspectives of teacher, manager and self</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">DailyAttendence</span> {
    <span style="color:#66d9ef">case</span> attended
    <span style="color:#66d9ef">case</span> unattended(execuse: String, realReason: String)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">teacherEvaluate</span>(<span style="color:#66d9ef">_</span> attendence: DailyAttendence) {
    <span style="color:#66d9ef">switch</span> attendence {
    <span style="color:#66d9ef">case</span> .attended:
        print(<span style="color:#e6db74">&#34;Keep up&#34;</span>)
    <span style="color:#66d9ef">case</span> .unattended(<span style="color:#66d9ef">_</span>, <span style="color:#66d9ef">let</span> realReason):
        <span style="color:#75715e">// teacher know your execuse and only care about real reason</span>
        print(<span style="color:#e6db74">&#34;I need to talk to your parents regarding </span><span style="color:#e6db74">\(</span>realReason<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">managerEvaluate</span>(<span style="color:#66d9ef">_</span> attendence: DailyAttendence) {
    <span style="color:#66d9ef">switch</span> attendence {
    <span style="color:#66d9ef">case</span> .attended:
        print(<span style="color:#e6db74">&#34;Keep up&#34;</span>)
    <span style="color:#66d9ef">case</span> .unattended(<span style="color:#66d9ef">let</span> execuse, <span style="color:#66d9ef">_</span>):
        print(<span style="color:#e6db74">&#34;I&#39;m fine with </span><span style="color:#e6db74">\(</span>execuse<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">selfEvaluate</span>(<span style="color:#66d9ef">_</span> attendence: DailyAttendence) {
    <span style="color:#66d9ef">switch</span> attendence {
    <span style="color:#66d9ef">case</span> .attended:
        print(<span style="color:#e6db74">&#34;A boring day&#34;</span>)
    <span style="color:#66d9ef">case</span> <span style="color:#66d9ef">let</span> .unattended(execuse, realReason):
        print(<span style="color:#e6db74">&#34;I have </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>execuse<span style="color:#e6db74">)</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74"> as execuse for the real reason of </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>realReason<span style="color:#e6db74">)</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span>)
    }
}

<span style="color:#66d9ef">let</span> jackyAttendence: DailyAttendence = DailyAttendence.unattended(execuse: <span style="color:#e6db74">&#34;alarm clock stopped working&#34;</span>, realReason: <span style="color:#e6db74">&#34;late sleep watching TV&#34;</span>)
teacherEvaluate(jackyAttendence)
<span style="color:#75715e">// I need to talk to your parents regarding late sleep watching TV</span>

<span style="color:#66d9ef">let</span> goodsonAttendence: DailyAttendence = DailyAttendence.attended
teacherEvaluate(goodsonAttendence)
<span style="color:#75715e">// keep up</span>

<span style="color:#66d9ef">let</span> mrUnsatisiable: DailyAttendence = DailyAttendence.unattended(execuse: <span style="color:#e6db74">&#34;sick&#34;</span>, realReason: <span style="color:#e6db74">&#34;job interview&#34;</span>)
managerEvaluate(mrUnsatisiable)
<span style="color:#75715e">// I&#39;m fine with sick</span>

selfEvaluate(mrUnsatisiable)
<span style="color:#75715e">// I have &#34;sick&#34; as execuse for the real reason of &#34;job interview&#34;</span>
</code></pre></div><h3 id="raw-values">Raw Values</h3>
<p>Implicit:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Month</span> : Int {
    <span style="color:#66d9ef">case</span> january = <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">case</span> feburary <span style="color:#75715e">// 2</span>
    <span style="color:#66d9ef">case</span> march <span style="color:#75715e">// 3</span>
    <span style="color:#66d9ef">case</span> april <span style="color:#75715e">// 4</span>
    <span style="color:#66d9ef">case</span> may <span style="color:#75715e">// 5</span>
    <span style="color:#66d9ef">case</span> june <span style="color:#75715e">// 6</span>
    <span style="color:#66d9ef">case</span> july <span style="color:#75715e">// 7</span>
    <span style="color:#66d9ef">case</span> august <span style="color:#75715e">// 8</span>
    <span style="color:#66d9ef">case</span> september <span style="color:#75715e">// 9</span>
    <span style="color:#66d9ef">case</span> october <span style="color:#75715e">// 10</span>
    <span style="color:#66d9ef">case</span> november <span style="color:#75715e">// 11</span>
    <span style="color:#66d9ef">case</span> december <span style="color:#75715e">// 12</span>
}

print(<span style="color:#e6db74">&#34;September has a value of </span><span style="color:#e6db74">\(</span>Month.september.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// Print &#34;September has a value of 9&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">SomeNames</span> : String {
    <span style="color:#66d9ef">case</span> michael
    <span style="color:#66d9ef">case</span> tom
    <span style="color:#66d9ef">case</span> jack
}

print(<span style="color:#e6db74">&#34;case tom has raw value of </span><span style="color:#e6db74">\(</span>SomeNames.tom.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// Print &#34;case tom has raw value of tom&#34;</span>
</code></pre></div><h3 id="initializing-from-raw-value">Initializing from raw value</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> monthNumber = <span style="color:#ae81ff">7</span>
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> month = Month(rawValue: monthNumber) {
    <span style="color:#66d9ef">switch</span> month {
    <span style="color:#66d9ef">case</span> .july:
        print(<span style="color:#e6db74">&#34;Month of examination, graduation and boy/girl-friend breaking up.&#34;</span>)
    <span style="color:#66d9ef">default</span>:
        print(<span style="color:#e6db74">&#34;Some other month&#34;</span>)
    }
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;Cannot recognize month number&#34;</span>)
}
</code></pre></div><h3 id="recursive-enumerations">Recursive enumerations</h3>
<p>A recursive enumeration is an enumeration that has another instance of the enumeration as the associated value for one or more of the enumeration cases</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Trap</span> {
    <span style="color:#66d9ef">case</span> rightWayOut
    <span style="color:#66d9ef">indirect</span> <span style="color:#66d9ef">case</span> wayOut(Trap)
}

<span style="color:#66d9ef">let</span> eternity = Trap.wayOut(Trap.rightWayOut)
<span style="color:#66d9ef">let</span> love = Trap.wayOut(eternity)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">escape</span>(from trap: Trap) {
    <span style="color:#66d9ef">switch</span> trap {
    <span style="color:#66d9ef">case</span> .rightWayOut:
        print(<span style="color:#e6db74">&#34;Found the right way out&#34;</span>)
    <span style="color:#66d9ef">case</span> .wayOut(<span style="color:#66d9ef">let</span> anotherTrap):
        print(<span style="color:#e6db74">&#34;Fall into another trap&#34;</span>)
        escape(from: anotherTrap)
    }
}

escape(from: love)
<span style="color:#75715e">// Fall into another trap</span>
<span style="color:#75715e">// Fall into another trap</span>
<span style="color:#75715e">// Found the right way out</span>
</code></pre></div><h3 id="different-uses-of-enum">Different Uses of Enum</h3>
<ul>
<li>enum can have methods inside it, the methods are for each case (so if a method performs case-dependent action, it need to consider all cases)</li>
<li>enum can be a good way of representing hierarchy, structure and even certain kinds of flow</li>
</ul>
<p>Example: an <code>enum</code> representing seasons with method that evolves to next season</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Season</span>: String, CustomStringConvertible {

    <span style="color:#66d9ef">case</span> spring
    <span style="color:#66d9ef">case</span> summer
    <span style="color:#66d9ef">case</span> autumn
    <span style="color:#66d9ef">case</span> winter

    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">next</span>() {
        <span style="color:#66d9ef">switch</span> <span style="color:#66d9ef">self</span> {
        <span style="color:#66d9ef">case</span> .spring:
            <span style="color:#66d9ef">self</span> = .summer
        <span style="color:#66d9ef">case</span> .summer:
            <span style="color:#66d9ef">self</span> = .autumn
        <span style="color:#66d9ef">case</span> .autumn:
            <span style="color:#66d9ef">self</span> = .winter
        <span style="color:#66d9ef">case</span> .winter:
            <span style="color:#66d9ef">self</span> = .spring
        }
    }
    
    <span style="color:#66d9ef">var</span> description: String {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;It&#39;s </span><span style="color:#e6db74">\(</span><span style="color:#66d9ef">self</span>.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> now.&#34;</span>
    }
}

<span style="color:#66d9ef">var</span> currentSeason = Season.spring
print(currentSeason)
currentSeason.next()
print(currentSeason)

<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// It&#39;s spring now.</span>
<span style="color:#75715e">// It&#39;s autumn now.</span>
</code></pre></div><p>Example: an &lsquo;enum&rsquo; representing stages of love and with ability to evolve</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">StageOfLove</span>: String {
    <span style="color:#66d9ef">case</span> acquaint
    <span style="color:#66d9ef">case</span> inLove
    <span style="color:#66d9ef">case</span> marriage
    <span style="color:#66d9ef">case</span> accustomed
    <span style="color:#66d9ef">case</span> bored
    <span style="color:#66d9ef">case</span> stranger
    <span style="color:#66d9ef">case</span> separate
    <span style="color:#66d9ef">case</span> lost
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">StageOfLove</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">next</span>() -&gt; StageOfLove {
        <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">self</span> <span style="color:#f92672">!=</span> .lost <span style="color:#66d9ef">else</span> {
            preconditionFailure(<span style="color:#e6db74">&#34;love ends here!&#34;</span>)
        }
        
        <span style="color:#66d9ef">switch</span> <span style="color:#66d9ef">self</span> {
        <span style="color:#66d9ef">case</span> .acquaint:
            <span style="color:#66d9ef">return</span> .inLove
        <span style="color:#66d9ef">case</span> .inLove:
            <span style="color:#66d9ef">return</span> .marriage
        <span style="color:#66d9ef">case</span> .marriage:
            <span style="color:#66d9ef">return</span> .accustomed
        <span style="color:#66d9ef">case</span> .accustomed:
            <span style="color:#66d9ef">return</span> .bored
        <span style="color:#66d9ef">case</span> .bored:
            <span style="color:#66d9ef">return</span> .stranger
        <span style="color:#66d9ef">case</span> .stranger:
            <span style="color:#66d9ef">return</span> .separate
        <span style="color:#66d9ef">case</span> .separate:
            <span style="color:#66d9ef">return</span> .lost
        <span style="color:#66d9ef">default</span>:
            preconditionFailure()
        }
    }
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">StageOfLove</span>: CustomStringConvertible {

    <span style="color:#66d9ef">var</span> description: String {
        <span style="color:#66d9ef">switch</span> <span style="color:#66d9ef">self</span> {
        <span style="color:#66d9ef">case</span> .acquaint, .inLove, .marriage, .accustomed:
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;You are the one&#34;</span>
        <span style="color:#66d9ef">case</span> .bored, .stranger, .separate:
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Memory fades as time goes by, we got seperated as we were pacing.&#34;</span>
        <span style="color:#66d9ef">case</span> .lost:
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;The moment I turned round, I found that you were not there. Suddenly, I was flustered.&#34;</span>
        }
    }
}

<span style="color:#66d9ef">var</span> currentStage = StageOfLove.acquaint
<span style="color:#66d9ef">var</span> nextStage = currentStage.next()
print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74"> becomes </span><span style="color:#e6db74">\(</span>nextStage.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)

currentStage = nextStage
nextStage = currentStage.next()

print(currentStage)
print(nextStage)

<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// acquaint becomes inLove</span>
<span style="color:#75715e">// inLove becomes marriage</span>
<span style="color:#75715e">// marriage becomes accustomed</span>
<span style="color:#75715e">// accustomed becomes bored</span>
<span style="color:#75715e">// bored becomes stranger</span>
<span style="color:#75715e">// stranger becomes separate</span>
<span style="color:#75715e">// Memory fades as time goes by, we got seperated as we were pacing.</span>
<span style="color:#75715e">// The moment I turned round, I found that you were not there. Suddenly, I was flustered.</span>

</code></pre></div><h3 id="enum-with-generic-parameters">Enum with Generic parameters</h3>
<p>Enum can be defined with generic parameters for associated values.</p>
<p>Example: define an <code>enum</code> representing success and error response with generic response and error type</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Response</span>&lt;SuccessType, ErrorType&gt; {
    <span style="color:#66d9ef">case</span> success(SuccessType)
    <span style="color:#66d9ef">case</span> failure(ErrorType)
}

<span style="color:#66d9ef">let</span> response1 = Response&lt;String, Int&gt;.success(<span style="color:#e6db74">&#34;valid response&#34;</span>)
<span style="color:#66d9ef">let</span> response2 = Response&lt;String, Int&gt;.failure(<span style="color:#ae81ff">404</span>)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">print</span>(response: Response&lt;String, Int&gt;) {
    <span style="color:#66d9ef">switch</span> response {
    <span style="color:#66d9ef">case</span> .success(<span style="color:#66d9ef">let</span> message):
        print(<span style="color:#e6db74">&#34;success message: </span><span style="color:#e6db74">\(</span>message<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    <span style="color:#66d9ef">case</span> .failure(<span style="color:#66d9ef">let</span> errorCode):
        print(<span style="color:#e6db74">&#34;error code: </span><span style="color:#e6db74">\(</span>errorCode<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    }
}

print(response1)
print(response2)
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="classes-and-structures">Classes and Structures</h2>
<p>Declare a class:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Love</span> { <span style="color:#75715e">// class name</span>
    <span style="color:#75715e">// &lt;statements&gt;</span>
    <span style="color:#75715e">// }</span>
</code></pre></div><p>Class/Type constant:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">    <span style="color:#75715e">// by default, love cannot persist</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">let</span> defaultPersistency = <span style="color:#66d9ef">false</span>
</code></pre></div><p>Stored properties</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> name: String?
<span style="color:#66d9ef">let</span> thorny = <span style="color:#66d9ef">true</span> <span style="color:#75715e">// constant</span>
    
<span style="color:#75715e">// inferred boolean variable</span>
<span style="color:#66d9ef">var</span> isPersistent = defaultPersistency
<span style="color:#66d9ef">var</span> looksPretty: Bool <span style="color:#75715e">// variable</span>
</code></pre></div><h3 id="computed-property">Computed property:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// computed property must be variable</span>
<span style="color:#66d9ef">var</span> tastesGood: Bool {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">!</span>looksPretty
}
</code></pre></div><h3 id="lazy-property">Lazy property:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">var</span> complexity: Int = { [<span style="color:#66d9ef">unowned</span> <span style="color:#66d9ef">self</span>] <span style="color:#66d9ef">in</span>
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> name = <span style="color:#66d9ef">self</span>.name {
        <span style="color:#66d9ef">return</span> name.lengthOfBytes(using: .utf8)
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    }
}()
</code></pre></div><h3 id="initializer">Initializer:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// non-optional properties must be initialized before use</span>
<span style="color:#66d9ef">init</span>(looksPretty: Bool, name: String? = <span style="color:#66d9ef">nil</span>) {
    <span style="color:#66d9ef">self</span>.looksPretty = looksPretty
    <span style="color:#66d9ef">self</span>.name = name
}
</code></pre></div><h3 id="instance-method">Instance method</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printDescription</span>() {
    Love.printNotes(about: <span style="color:#66d9ef">self</span>)
}
</code></pre></div><h3 id="classtype-method">Class/Type method:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// `final` indicates cannot be overwritten</span>
<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">displayName</span>() -&gt; String {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.name ?? <span style="color:#66d9ef">self</span>.defaultName()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">defaultName</span>() -&gt; String {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;love&#34;</span>
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// called when no reference to the instance, ie. reference counter reaches 0</span>
<span style="color:#66d9ef">deinit</span> {
    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span><span style="color:#66d9ef">self</span>.displayName<span style="color:#e6db74">())</span><span style="color:#e6db74"> disappeared in a puff of logic&#34;</span>)
}

<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printNotes</span>(about love: Love) {
    <span style="color:#66d9ef">let</span> displayName = love.displayName()
    print(<span style="color:#e6db74">&#34;Notes about </span><span style="color:#e6db74">\(</span>love.defaultName<span style="color:#e6db74">())</span><span style="color:#e6db74">:&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> name = love.name {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>love.defaultName<span style="color:#e6db74">())</span><span style="color:#e6db74"> has a name of </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">\(</span>name<span style="color:#e6db74">)</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>love.defaultName<span style="color:#e6db74">())</span><span style="color:#e6db74"> has noname&#34;</span>)
    }

    <span style="color:#66d9ef">if</span> love.thorny {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>displayName<span style="color:#e6db74">)</span><span style="color:#e6db74"> is thorny&#34;</span>)
    }

    <span style="color:#66d9ef">if</span> love.isPersistent {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>displayName<span style="color:#e6db74">)</span><span style="color:#e6db74"> lasts forever&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>displayName<span style="color:#e6db74">)</span><span style="color:#e6db74"> </span><span style="color:#e6db74">\(</span>Love.defaultPersistency ? <span style="color:#e6db74">&#34;lasts forever&#34;</span> : <span style="color:#e6db74">&#34;doesn&#39;t last long&#34;</span><span style="color:#e6db74">)</span><span style="color:#e6db74"> by default&#34;</span>)
    }

    <span style="color:#66d9ef">let</span> look = love.looksPretty ? <span style="color:#e6db74">&#34;looks pretty&#34;</span> : <span style="color:#e6db74">&#34;looks ugly&#34;</span>
    <span style="color:#66d9ef">let</span> taste = love.tastesGood ? <span style="color:#e6db74">&#34;tastes good&#34;</span> : <span style="color:#e6db74">&#34;tastes bad&#34;</span>

    <span style="color:#66d9ef">if</span> love.looksPretty == love.tastesGood {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>displayName<span style="color:#e6db74">)</span><span style="color:#e6db74"> </span><span style="color:#e6db74">\(</span>look<span style="color:#e6db74">)</span><span style="color:#e6db74"> and </span><span style="color:#e6db74">\(</span>taste<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>displayName<span style="color:#e6db74">)</span><span style="color:#e6db74"> </span><span style="color:#e6db74">\(</span>look<span style="color:#e6db74">)</span><span style="color:#e6db74"> but </span><span style="color:#e6db74">\(</span>taste<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    }
}
</code></pre></div><h3 id="property-observer">Property Observer</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">    <span style="color:#66d9ef">var</span> notes: String? {
        <span style="color:#66d9ef">willSet</span> {
            <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> newNotes = newValue {
                print(<span style="color:#e6db74">&#34;Notes will be </span><span style="color:#e6db74">\(</span>newNotes<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
            }
        }
        <span style="color:#66d9ef">didSet</span> {
            <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> notes = <span style="color:#66d9ef">self</span>.notes, <span style="color:#66d9ef">let</span> oldNotes = oldValue {
                print(<span style="color:#e6db74">&#34;Notes has been set to </span><span style="color:#e6db74">\(</span>notes<span style="color:#e6db74">)</span><span style="color:#e6db74"> from </span><span style="color:#e6db74">\(</span>oldNotes<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
            }
        }
    }
</code></pre></div><p><em>Tip</em>: setting a property in <code>init</code>, <code>willSet</code> and <code>didSet</code> won&rsquo;t trigger property observer.</p>
<p>make some loves:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someLove = Love(looksPretty: <span style="color:#66d9ef">false</span>)
someLove.printDescription()
<span style="color:#66d9ef">let</span> someHate = Love(looksPretty: <span style="color:#66d9ef">true</span>, name: <span style="color:#e6db74">&#34;Hate&#34;</span>)
someHate.isPersistent = <span style="color:#66d9ef">true</span>
someHate.printDescription()
</code></pre></div><p><code>someLove</code> prints</p>
<pre><code>Notes about love:
love has noname
love is thorny
love doesn't last long by default
love looks ugly but tastes good
</code></pre><p><code>hate</code> prints</p>
<pre><code>Notes about love:
love has a name of &quot;Hate&quot;
Hate is thorny
Hate lasts forever
Hate looks pretty but tastes bad
</code></pre><h3 id="static-vs-class-function">static vs class function:</h3>
<p>Both <code>static</code> and <code>class</code> can associate method of class, subclass can overrie <code>class</code> methods but not <code>static</code> methods.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Address</span> {
    
    <span style="color:#75715e">// type constant</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">let</span> format = <span style="color:#e6db74">&#34;British&#34;</span>
    
    <span style="color:#66d9ef">var</span> nickName: String
    <span style="color:#66d9ef">var</span> streetNumber: String
    <span style="color:#66d9ef">var</span> streetName: String
    <span style="color:#66d9ef">var</span> suburb: String
    <span style="color:#66d9ef">var</span> state: String
    <span style="color:#66d9ef">var</span> postcode: String
    <span style="color:#66d9ef">var</span> country: String
    
    <span style="color:#66d9ef">var</span> fullAddress: String {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>streetNumber<span style="color:#e6db74">)</span><span style="color:#e6db74"> </span><span style="color:#e6db74">\(</span>streetName<span style="color:#e6db74">)</span><span style="color:#e6db74">, </span><span style="color:#e6db74">\(</span>suburb<span style="color:#e6db74">)</span><span style="color:#e6db74">, </span><span style="color:#e6db74">\(</span>state<span style="color:#e6db74">)</span><span style="color:#e6db74"> </span><span style="color:#e6db74">\(</span>postcode<span style="color:#e6db74">)</span><span style="color:#e6db74">, </span><span style="color:#e6db74">\(</span>country<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>
    }
    
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">updateNickName</span>(<span style="color:#66d9ef">_</span> nickName: String) {
        <span style="color:#66d9ef">self</span>.nickName = nickName
    }
}
</code></pre></div><p><em>tip</em>: <code>mutating</code> prefix is need for <code>struct</code> and <code>enum</code> to modify its own value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">print(<span style="color:#e6db74">&#34;Using </span><span style="color:#e6db74">\(</span>Address.format<span style="color:#e6db74">)</span><span style="color:#e6db74"> format&#34;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// default struct-wise initializer</span>
<span style="color:#66d9ef">let</span> address = Address(nickName: <span style="color:#e6db74">&#34;Beehive&#34;</span>, streetNumber: <span style="color:#e6db74">&#34;123&#34;</span>, streetName: <span style="color:#e6db74">&#34;Straight Street&#34;</span>, suburb: <span style="color:#e6db74">&#34;Curveless&#34;</span>, state: <span style="color:#e6db74">&#34;XYZ&#34;</span>, postcode: <span style="color:#e6db74">&#34;1234&#34;</span>, country: <span style="color:#e6db74">&#34;Unobtainable&#34;</span>)
print(address.fullAddress)
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Using British format</span>
<span style="color:#75715e">// 123 Straight Street, Curveless, XYZ 1234, Unobtainable</span>
</code></pre></div><h3 id="inheritance">Inheritance</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// hate is a kind of love</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Hate</span>: Love {

    <span style="color:#66d9ef">init</span>() {
        <span style="color:#66d9ef">super</span>.<span style="color:#66d9ef">init</span>(looksPretty: <span style="color:#66d9ef">false</span>, name: <span style="color:#e6db74">&#34;exclusive love&#34;</span>)
        <span style="color:#66d9ef">self</span>.isPersistent = <span style="color:#66d9ef">true</span>
    }
    
    <span style="color:#75715e">// `override` keyword used here</span>
    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">defaultName</span>() -&gt; String {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;hate&#34;</span>
    }
}

<span style="color:#66d9ef">let</span> moreHate = Hate()
moreHate.printDescription()
</code></pre></div><p><code>moreHate</code> prints:</p>
<pre><code>Notes about hate:
hate has a name of &quot;exclusive love&quot;
exclusive love is thorny
exclusive love lasts forever
exclusive love looks ugly but tastes good
</code></pre><h3 id="required-and-convenience-initializers"><code>required</code> and <code>convenience</code> initializers</h3>
<ul>
<li><code>required</code> initializer makes sure subclass still implements the initializer
<ul>
<li><code>required init(name: String)</code></li>
</ul>
</li>
<li><code>convenience</code> initializer is forced to call a non-convenience initializer directly or indirectly
<ul>
<li><code>convenience init()</code></li>
</ul>
</li>
<li>non-convenience initializer is called <em>designated</em> initializer</li>
<li>a designated initializer must call a designated initializer from its immediate superclass.</li>
<li>a convenience initializer must call another initializer from the same class.</li>
<li>a convenience initializer must ultimately call a designated initializer.</li>
</ul>
<h3 id="identify-operators">Identify operators</h3>
<p>Check whether two constants or variables refer to the same single instance:</p>
<ul>
<li>Identical to (===)</li>
<li>Not identical to (!==)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> fakeLove = someLove
print(<span style="color:#e6db74">&#34;someLove is fakeLove? </span><span style="color:#e6db74">\(</span>someLove === fakeLove<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="deinitialization">Deinitialization</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> shortTermLove: Love? = Love(looksPretty: <span style="color:#66d9ef">true</span>)
shortTermLove = <span style="color:#66d9ef">nil</span>
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// love disappears in a puff of logic</span>
</code></pre></div><h3 id="class-vs-struct">class vs struct</h3>
<p><em>Tip</em>: there are several differences between <code>class</code> and <code>struct</code>:</p>
<p><em>class</em>:</p>
<ul>
<li>reference type, object with identity, e.g. <code>Student</code></li>
<li>slower on heap</li>
<li>updated with logic</li>
<li>internals can remain mutable even when declared with <code>let</code></li>
<li>can be inherited</li>
<li>type conversion can check the type of instance at runtime</li>
<li>can use <code>deinit</code></li>
<li>same instance can be referenced more than once</li>
</ul>
<p><em>struct</em>:</p>
<ul>
<li>value type, object without identity, e.g. <code>Address</code>, copy on assignment</li>
<li>faster on stack</li>
<li>simple data store, safer for multi-threading</li>
<li>immutable when declared with <code>let</code></li>
</ul>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="protocols">Protocols</h2>
<h3 id="define-a-protocol">Define a protocol</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Rescuable</span> {
    
    <span style="color:#75715e">// method:</span>
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">rescue</span>()
    
    <span style="color:#75715e">// property:</span>
    <span style="color:#66d9ef">var</span> distanceToGod: UInt { <span style="color:#66d9ef">get</span> <span style="color:#66d9ef">set</span> }
    <span style="color:#66d9ef">var</span> hasBeenSaved: Bool { <span style="color:#66d9ef">get</span> }
    
    <span style="color:#75715e">// initializer</span>
    <span style="color:#66d9ef">init</span>?(initialDistanceToGod: UInt)
}
</code></pre></div><h3 id="implementing-a-protocol">Implementing a protocol</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>: Rescuable {
    
    <span style="color:#66d9ef">var</span> distanceToGod: UInt
    
    <span style="color:#75715e">// satisfied by a `required` initializer in non-final class</span>
    <span style="color:#66d9ef">required</span> <span style="color:#66d9ef">init</span>?(initialDistanceToGod: UInt) {
        <span style="color:#66d9ef">if</span> initialDistanceToGod == <span style="color:#ae81ff">0</span> {
            print(<span style="color:#e6db74">&#34;Already rescued, not a human anymore&#34;</span>)
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
        }
        <span style="color:#66d9ef">self</span>.distanceToGod = initialDistanceToGod
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">rescue</span>() {
        <span style="color:#66d9ef">if</span> distanceToGod <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> {
            distanceToGod <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
        }
    }
    
    <span style="color:#66d9ef">var</span> hasBeenSaved: Bool {
        <span style="color:#66d9ef">return</span> distanceToGod == <span style="color:#ae81ff">0</span>
    }
}
</code></pre></div><p>Swift doesn&rsquo;t care how you implement a protocol, as long as you implemnet it.
Choices for implementing a <code>get</code> property in protocol:</p>
<ul>
<li>a constant stored property</li>
<li>a variable stored property</li>
<li>a read-only computed property</li>
<li>a read-write computed property</li>
</ul>
<h3 id="implementing-multiple-protocols">Implementing multiple protocols</h3>
<p>We define an <code>Evil</code> protocol:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Evil</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fulfilDesire</span>()
}
</code></pre></div><h3 id="adopt-protocol-using-extension">Adopt protocol using extension</h3>
<p>Make <code>Person</code> also implements <code>Evil</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">Person</span>: Evil {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fulfilDesire</span>() {
        <span style="color:#66d9ef">self</span>.distanceToGod <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
    }
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">commentary</span>(of thing: Rescuable <span style="color:#f92672">&amp;</span> Evil) {
    print(<span style="color:#e6db74">&#34;Something that is evil but rescuable&#34;</span>)
    
    <span style="color:#66d9ef">if</span> thing.hasBeenSaved {
        print(<span style="color:#e6db74">&#34;God saved you&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        print(<span style="color:#e6db74">&#34;distance to God: </span><span style="color:#e6db74">\(</span>thing.distanceToGod<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        thing.fulfilDesire()
        print(<span style="color:#e6db74">&#34;desire makes the distance to God becomes </span><span style="color:#e6db74">\(</span>thing.distanceToGod<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        thing.rescue()
        print(<span style="color:#e6db74">&#34;after rescue, distance to God becomes </span><span style="color:#e6db74">\(</span>thing.distanceToGod<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
    }
}

<span style="color:#66d9ef">let</span> person = Person(initialDistanceToGod: <span style="color:#ae81ff">20</span>)<span style="color:#f92672">!</span>
commentary(of: person)

<span style="color:#66d9ef">let</span> distance = person.distanceToGod
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">_</span> <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..distance {
    person.rescue()
}

commentary(of: person)
<span style="color:#75715e">// output: &#34;God saved you&#34;</span>
</code></pre></div><p><em>Tip</em>: in Swift, by default all the functions in protocol are <strong>required</strong>, unlike in Objective-C where <code>@optional</code> and <code>@required</code> can be used to annotate methods in a protocol.
There are two workarounds:</p>
<ol>
<li>prefix protocol and optional function with <code>@objc</code>, so function can be made <code>@optional</code></li>
<li>provide a default implementation of protocol function via extension</li>
</ol>
<h3 id="class-only-protocol">Class Only Protocol</h3>
<p>Define a class only protocol:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">ClassOnlyProtocol</span>: AnyObject {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someMethodHere</span>()
}
</code></pre></div><p>So that <code>ClassOnlyProtocol</code> can be implemented by only class, which is reference type, other than value types like <code>struct</code>. One of the reason for needing this is for having delegate which is usually weak, thus value type cannot be used.</p>
<p>Prior to Swift 4, <code>class</code> is used in place of <code>AnyObject</code>, now it&rsquo;s made more clear: they represent an existential for classes.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="generics">Generics</h2>
<blockquote>
<p>It is <strong>generally</strong> agreed that &ldquo;Hello&rdquo; is an appropriate greeting because if you entered a room and said &ldquo;Goodbye,&rdquo; it could confuse a lot of people. &ndash; Dolph Sharp, &ldquo;I&rsquo;m O.K., You&rsquo;re Not So Hot&rdquo;</p>
</blockquote>
<h3 id="generic-function">Generic Function</h3>
<p>Suppose you want to create a function that swaps the values of its parameters, and the function has to work for different types. Instead of having one function per data type, you can have one single function with generic type. <strong>It is like a super-type of different types.</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">swapValues</span>&lt;T&gt;(<span style="color:#66d9ef">_</span> a: <span style="color:#66d9ef">inout</span> T, <span style="color:#66d9ef">_</span> b: <span style="color:#66d9ef">inout</span> T) {
    <span style="color:#66d9ef">let</span> temporaryA = a
    a = b
    b = temporaryA
}

<span style="color:#66d9ef">var</span> humanWorld = <span style="color:#e6db74">&#34;&#34;</span>
<span style="color:#66d9ef">var</span> hell = <span style="color:#e6db74">&#34;full of evil&#34;</span>
swapValues(&amp;humanWorld, &amp;hell)
<span style="color:#75715e">// `hell` is now empty, `humanWorld` is now &#34;full of evil&#34;</span>
</code></pre></div><h3 id="generic-types">Generic Types</h3>
<p>Suppose we want to describe the universe with matters.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Universe</span>&lt;Matter&gt; {
    <span style="color:#66d9ef">var</span> matters = [Matter]()
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">create</span>(<span style="color:#66d9ef">_</span> matter: Matter) {
        <span style="color:#66d9ef">self</span>.matters.append(matter)
    }
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">reject</span>() -&gt; Matter {
        <span style="color:#66d9ef">return</span> matters.removeLast()
    }
}
</code></pre></div><p><code>Matter</code> is a generic type - there&rsquo;s no need to hard code any real type (concrete or protocol) in the <code>Universe</code> definition; When we create a <code>Universe</code> instance, we need to specify a type that replaces <code>Matter</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Planet</span> {
    <span style="color:#66d9ef">let</span> name: String
}

<span style="color:#66d9ef">var</span> solarSystem = Universe&lt;Planet&gt;()
solarSystem.create(Planet(name: <span style="color:#e6db74">&#34;Mercury&#34;</span>))
solarSystem.create(Planet(name: <span style="color:#e6db74">&#34;Pluto&#34;</span>))
solarSystem.create(Planet(name: <span style="color:#e6db74">&#34;Venus&#34;</span>))

print(<span style="color:#e6db74">&#34;Last planet being rejected by solar system: </span><span style="color:#e6db74">\(</span>solarSystem.reject<span style="color:#e6db74">())</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">// output:</span>
<span style="color:#75715e">// Last planet being rejected by solar system: Planet(name: &#34;Venus&#34;)</span>
</code></pre></div><h3 id="type-constraints">Type Constraints</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fight</span>&lt;G: GoodProtocol, E: EvilProtocol&gt;(somethingGood: G, somethingEvil: E)
</code></pre></div><p>The <code>&lt;G: GoodProtocol, E: EvilProtocol&gt;</code> syntax adds a type constraint to the placeholder. It defines that <code>G</code> and <code>E</code> needs to conform to the protocol <code>GoodProtocol</code> and <code>EvilProtocol</code>, respectively.</p>
<p>You cannot call <code>fight(somethingGood:somethingEvil:)</code> with two parameters that do not comform to something that respectively implement <code>GoodProtocol</code> and <code>EvilProtocol</code>.</p>
<p>Question: why the following doesn&rsquo;t work?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fight</span>(somethingGood: GoodProtocol, somethingEvil: EvilProtocol)
</code></pre></div><p>Because the compiler must be able to figure out at <strong>compile time</strong> what types are used, if either <code>GoodProtocol</code> or <code>EvilProtocol</code> has <code>associatedtype</code> or defined in a way that certain constraints it declares must be satisfied, using the protocol directly won&rsquo;t compile.</p>
<p>For example, the code below would not work:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">exists</span>(object: Equatable, <span style="color:#66d9ef">in</span> array: [Equatable]) -&gt; Bool {
    <span style="color:#66d9ef">return</span> array.contains(object)
}
</code></pre></div><p>while this does:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">exists</span>&lt;T: Equatable&gt;(object: T, <span style="color:#66d9ef">in</span> array: [T]) -&gt; Bool {
    <span style="color:#66d9ef">return</span> array.contains(object)
}
</code></pre></div><h3 id="associated-types">Associated Types</h3>
<p>Sometimes it can be useful to specify <code>associatedtype</code> in <code>protocol</code>, they behave like placeholder.</p>
<p>Imagine we have a very generic <code>Generator</code> which generates output of <code>OutputType</code>, from input of <code>InputType</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Generator</span> {
    associatedtype InputType
    associatedtype OutputType
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>(input: InputType) -&gt; OutputType
}
</code></pre></div><p>And we also define <code>Transformable</code> protocol:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Transformable</span> {
    associatedtype TransformType
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">transform</span>() -&gt; TransformType
}
</code></pre></div><h3 id="associated-types-with-constraints">Associated Types with Constraints</h3>
<p>Define a <code>ChainedGenerator</code> which has has <code>InputProvider</code> and <code>OutputConsumer</code> of type <code>Generator</code>, that generates input and consumes output</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">ChainedGenerator</span>: Generator {
    associatedtype InputProvider: Generator <span style="color:#66d9ef">where</span> InputProvider.OutputType == InputType
    associatedtype OutputConsumer: Generator <span style="color:#66d9ef">where</span> OutputConsumer.InputType == OutputType
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>(input: InputProvider, consumer: OutputConsumer) -&gt; OutputConsumer.OutputType
}
</code></pre></div><p>Conforming to the <code>Generator</code> protocol, we want to describe the photosynthesis of green plants that absorbs carbon dioxide and generates oxygen.</p>
<blockquote>
<p>There are some micro-organisms that exhibit characteristics of both plants and animals. When exposed to light they undergo <strong>photosynthesis</strong>; and when the lights go out, they turn into animals. But then again, don&rsquo;t we all?</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Photosynthate</span> {
    <span style="color:#75715e">// photosynthate: n. the product of photosynthesis</span>
    <span style="color:#66d9ef">init</span>()
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">emit</span>()
}
</code></pre></div><p>Now we can define the generator:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Photosynthesizer</span>&lt;T: Transformable, P: Photosynthate&gt;: Generator <span style="color:#66d9ef">where</span> T.TransformType == P {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>(input: T) -&gt; P {
        <span style="color:#66d9ef">return</span> input.transform()
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">CO2</span>&lt;P: Photosynthate&gt;: Transformable {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">transform</span>() -&gt; P {
        print(<span style="color:#e6db74">&#34;transforming CO2…&#34;</span>)
        <span style="color:#66d9ef">return</span> P()
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Oxygen</span>: Photosynthate {
    <span style="color:#66d9ef">init</span>() {}
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">emit</span>() {
        print(<span style="color:#e6db74">&#34;emitting oxygen…&#34;</span>)
    }
}
</code></pre></div><p>Now we can have our green plant:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// Define a green plant that is a `Photosynthesizer` (thus a `Generator`), its input is CO2 (a `Transformable`) that can transform to `Oxygen`</span>
<span style="color:#66d9ef">let</span> greenPlant = Photosynthesizer&lt;CO2&lt;Oxygen&gt;, Oxygen&gt;()
greenPlant.generate(input: CO2&lt;Oxygen&gt;()).emit()
<span style="color:#75715e">// print:</span>
<span style="color:#75715e">// transforming CO2…</span>
<span style="color:#75715e">// emitting oxygen…</span>
</code></pre></div><p>We can abstract the idea of <code>Photosynthesizer</code> and create a <code>DefaultGenerator</code> that <strong>semantically</strong> works for any <code>Transformable</code> (<code>Photosynthesizer</code> requires the <code>Transformable</code>&rsquo;s <code>TransformType</code> conforms to <code>Photosynthate</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DefaultGenerator</span>&lt;T: Transformable, O&gt;: Generator <span style="color:#66d9ef">where</span> O == T.TransformType {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>(input: T) -&gt; O {
        <span style="color:#66d9ef">return</span> input.transform()
    }
}
</code></pre></div><p>It could be further simplified:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TransformBasedGenerator</span>&lt;T: Transformable&gt;: Generator {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">generate</span>(input: T) -&gt; T.TransformType {
        <span style="color:#66d9ef">return</span> input.transform()
    }
}
</code></pre></div><blockquote>
<p>the world we live in / is like a junkyard / people are like bugs / fighting against each other for food / all we eat is conscience / all we shit is opinions
&ldquo;Junkyard&rdquo; - He Yong</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Conscience</span>: Transformable {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">transform</span>() -&gt; String {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;transforming conscience into opinions&#34;</span>
    }
}

<span style="color:#66d9ef">let</span> junkyard = TransformBasedGenerator&lt;Conscience&gt;()
print(junkyard.generate(input: Conscience()))
<span style="color:#75715e">// print: transforming conscience into opinions</span>
</code></pre></div><h3 id="generics-with-where-clause">Generics with where clause</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">compareTransform</span>&lt;T1: Transformable, T2: Transformable&gt;(<span style="color:#66d9ef">_</span> transformable1: T1, <span style="color:#66d9ef">_</span> transformable2: T2) -&gt; Bool <span style="color:#66d9ef">where</span> T1.TransformType == T2.TransformType, T1.TransformType: Equatable {
    <span style="color:#66d9ef">let</span> transformed1 = transformable1.transform()
    <span style="color:#66d9ef">let</span> transformed2 = transformable2.transform()
    <span style="color:#66d9ef">return</span> transformed1 == transformed2
}
</code></pre></div><h3 id="extension-with-generics">Extension with generics</h3>
<p>Create an extension of <code>Array</code> for <code>Statement</code> to check whether a true statement exists.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Statement</span>: CustomStringConvertible {
    <span style="color:#66d9ef">let</span> sentence: String
    <span style="color:#66d9ef">let</span> isTruth: Bool
    <span style="color:#66d9ef">var</span> description: String {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;This is a </span><span style="color:#e6db74">\(</span>isTruth ? <span style="color:#e6db74">&#34;true&#34;</span> : <span style="color:#e6db74">&#34;false&#34;</span><span style="color:#e6db74">)</span><span style="color:#e6db74"> statement.&#34;</span>
    }
}

<span style="color:#66d9ef">let</span> statement1 = Statement(sentence: <span style="color:#e6db74">&#34;The following statement is true&#34;</span>, isTruth: <span style="color:#66d9ef">true</span>)
<span style="color:#66d9ef">let</span> statement2 = Statement(sentence: <span style="color:#e6db74">&#34;The previous statement is false&#34;</span>, isTruth: <span style="color:#66d9ef">false</span>)

<span style="color:#66d9ef">let</span> statements = [statement1, statement2]

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">Array</span> <span style="color:#66d9ef">where</span> Element == Statement {
    <span style="color:#66d9ef">var</span> hasTrueStatement: Bool {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.contains(<span style="color:#66d9ef">where</span>: { $0.isTruth })
    }
}

print(<span style="color:#e6db74">&#34;Has true statement? </span><span style="color:#e6db74">\(</span>statements.hasTrueStatement ? <span style="color:#e6db74">&#34;Y&#34;</span> : <span style="color:#e6db74">&#34;N&#34;</span><span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="generics-subscript">Generics subscript</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">Array</span> <span style="color:#66d9ef">where</span> Element == Statement {
    <span style="color:#66d9ef">subscript</span>&lt;Indices: Sequence&gt;(indices: Indices) -&gt; [Element]
        <span style="color:#66d9ef">where</span> Indices.Iterator.Element == Int {
            <span style="color:#66d9ef">var</span> result = [Element]()
            <span style="color:#66d9ef">for</span> index <span style="color:#66d9ef">in</span> indices {
                result.append(<span style="color:#66d9ef">self</span>[index])
            }
            <span style="color:#66d9ef">return</span> result
    }
}

<span style="color:#66d9ef">let</span> partialStatements = statements[[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>]]
print(partialStatements)
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="access-control">Access Control</h2>
<p>A module is a single unit of code distribution, can be imported by another module using <code>import</code>.</p>
<h3 id="syntax-1">Syntax</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PublicPool</span> {}
<span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">InternalChangeRoom</span> {}
fileprivate <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MaleFilePrivateBath</span> {}
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PrivateLocker</span> {}

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">var</span> publicFeedback = <span style="color:#e6db74">&#34;Good&#34;</span>
<span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">let</span> internalComments = <span style="color:#e6db74">&#34;Not great&#34;</span>
fileprivate <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someFilePrivateFunction</span>() {}
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">privateFunctionRoom</span>() {}
</code></pre></div><h3 id="access-control-levels">Access control levels</h3>
<ul>
<li><code>open</code> and <code>public</code> entities can be used within any source file from their defining module, and also in source files from other modules that imports the defining module. Usually used for framework public interface.</li>
<li><code>internal</code> entities can be used within any source file from defining module but not in any file outside.</li>
<li><code>file-private</code> entities can only be used by its own defining source file.</li>
<li><code>private</code> entities can be used only by the enclosing declaration and extensions of the declaration in the same file</li>
<li>default access level is <code>internal</code></li>
</ul>
<p><strong><code>open</code> vs <code>public</code></strong></p>
<ul>
<li><code>public</code> classes and members can be subclassed / overridden only within its defining module.</li>
<li><code>open</code> classes and members can be subclassed / overridden within its defining module as well as importing module.</li>
</ul>
<p>No entities can be defined in terms of another entity that has more restrictive access level</p>
<p><em>an <code>open</code> property defined in a <code>private</code> class, or a <code>public</code> function with <code>private</code> type parameters is like saying you can get a gift without buying our product and details are written on a note inside our product package.</em></p>
<h3 id="unit-tests-targets">Unit tests targets</h3>
<p>A unit test target can access any internal entity, if you mark the import declaration for a product module with the <code>@testable</code> attribute and compile that produce module with testing enabled.</p>
<h3 id="custom-types">Custom types</h3>
<p>The access control level of a type also affects the default access level of the type&rsquo;s members</p>
<ul>
<li>private or file private type -&gt; private or type private members</li>
<li>internal or public type -&gt; internal members</li>
<li>public type defaults to have internal members, to ensure public-facing API for a type doesn&rsquo;t expose internal workings by mistake</li>
</ul>
<h3 id="other-types">Other types</h3>
<p>You can skip to the end of the below list for <strong>simple way to remember</strong>.</p>
<ul>
<li>the access level for a <strong>tuple type</strong> is the most restrictive access level of all types used in the tuple</li>
<li>the access level for a <strong>function type</strong> is the most restrictive access level of the function&rsquo;s parameter types and return type, access level must be specified as part of function definition if its calculated access level doesn&rsquo;t match its contextual default</li>
<li>individual cases of an <strong>enumeration</strong> has same access level as the enumeration</li>
<li>types used for any <strong>raw values</strong> or <strong>associated values</strong> in enumeration must have access level at least as high as the enumeration</li>
<li><strong>nested types</strong> has the same kind of access level rule as custom types -&gt; members, actually nested types are also a kind of member of enclosing type</li>
<li>a <strong>subclass</strong> can&rsquo;t have higher access level than its superclass, however, an override can make an inherited class member more accessible than its superclass version</li>
<li>a <strong>constant</strong>, <strong>variable</strong> or <strong>property</strong> can&rsquo;t be more public than its type</li>
<li><strong>getters</strong> and <strong>setters</strong> for constants, variables, properties, and subscripts have the same access level as the constants, variables or properties</li>
<li>you can give a <strong>setter</strong> a <em>lower</em> access level than its corresponding <strong>getter</strong>: <code>fileprivate(set)</code>, <code>private(set)</code> or <code>internal(set)</code> before the <code>var</code> or <code>subscript</code> introducer</li>
<li>custom <strong>initializers</strong> can be assigned an access level less or equal to the type that they initialize</li>
<li>a <strong>required initializer</strong> must have the same access level as the class it belongs to</li>
<li><strong>default initializer</strong> has the same access level as the type it initializes, unless for <code>public</code> type the default initializer is <code>internal</code></li>
<li><strong>default memberwise initializer</strong> for a structure type has the same access level of the lowest access level of the structure&rsquo;s stored properties, <code>public</code> structure has <code>internal</code> default initializer unless specified explicitly</li>
<li>the access level of each requirement within a <strong>protocol</strong> definition is automatically set to the same access level as the protocol</li>
<li>a type can <strong>conform to a protocol</strong> with a lower access level than the type itself</li>
<li>this is not about Access Control, just here to test if you read carefully; So, if you see this, you can be confident that you are a careful person</li>
<li>any type members added in an <strong>extension</strong> have the same default access level as type members declared in the original type being extended</li>
<li>you can mark an extension with explicit access-level modifier, e.g. <code>private extension</code></li>
<li>a type alias can have an access level less than or equal to the access level of the type it aliases</li>
</ul>
<p><strong>analog way to remember:</strong> the volume of a timber bucket depends on the shorted piece of timber.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="advanced-operators">Advanced Operators</h2>
<h3 id="bitwise-operators">Bitwise operators</h3>
<blockquote>
<p>one and zero looked just right, made for each other: 1, the definite, upright line; and 0, the diagram of nothing at all - Sadie Plant, <em>zeros + ones</em></p>
</blockquote>
<p><strong>Bitwise NOT</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> initialBits: UInt8 = <span style="color:#ae81ff">0b00001111</span>
<span style="color:#66d9ef">let</span> invertedBits = <span style="color:#f92672">~</span>initialBits <span style="color:#75715e">// equals 11110000</span>
</code></pre></div><p><strong>Bitwise AND</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> partialTruth: UInt8 = <span style="color:#ae81ff">0b11111000</span>
<span style="color:#66d9ef">let</span> missingTruth: UInt8 = <span style="color:#ae81ff">0b00111001</span>
<span style="color:#66d9ef">let</span> theRealTruth = partialTruth <span style="color:#f92672">&amp;</span> missingTruth <span style="color:#75715e">// equals 00111000</span>
</code></pre></div><p><strong>Bitwise OR</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> upperTeeth: UInt8 = <span style="color:#ae81ff">0b01010101</span>
<span style="color:#66d9ef">let</span> lowerTeeth: UInt8 = <span style="color:#ae81ff">0b10101010</span>
<span style="color:#66d9ef">let</span> bite = upperTeeth <span style="color:#f92672">|</span> lowerTeeth <span style="color:#75715e">// equals 11111111</span>
</code></pre></div><p><strong>Bitwise XOR</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> boysAndGirls: UInt8 = <span style="color:#ae81ff">0b00010100</span>
<span style="color:#66d9ef">let</span> girlsAndBoys: UInt8 = <span style="color:#ae81ff">0b00000101</span>
<span style="color:#66d9ef">let</span> nextGenerationExistence = boysAndGirls <span style="color:#f92672">^</span> girlsAndBoys
 <span style="color:#75715e">// equals 00010001</span>
</code></pre></div><p><strong>Bitwise shift</strong></p>
<p><strong>unsigned integers</strong>:</p>
<ol>
<li>existing bits are moved to the left or right by the requested number of places</li>
<li>any bits moved beyond the bounds of integer&rsquo;s storage are discarded</li>
<li>zeros are inserted in the spaces left behind</li>
</ol>
<p><strong>signed integers</strong>: when shifting signed integers to the right, apply the same rule as unsigned integers, but fill any empty bits on the left with the <em>sign bit</em>, rather than with a zero.</p>
<p><strong>Overflow operators</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> unsignedOverflow = UInt8.max <span style="color:#75715e">// 255</span>
<span style="color:#75715e">// unsignedOverflow += 1 would cause an error</span>
unsignedOverflow = unsignedOverflow <span style="color:#f92672">&amp;+</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e">// 0</span>
</code></pre></div><ul>
<li>overflow addition (<code>&amp;+</code>)</li>
<li>overflow subtraction (<code>&amp;-</code>)</li>
<li>overflow multiplication (<code>&amp;*</code>)</li>
</ul>
<h3 id="precedence-and-associativity">Precedence and Associativity</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">5</span> <span style="color:#75715e">// equals 17</span>
<span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> ((<span style="color:#ae81ff">3</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">5</span>) <span style="color:#75715e">// equals 17</span>
</code></pre></div><h3 id="operator-methods">Operator Methods</h3>
<p>Classes and structures can provide their own implementation of existing operators (ie. <em>overloading</em>).</p>
<p><strong>Example</strong></p>
<p>The universe was born with two concepts: spirit and material. <code>Characteristic</code> is a structure
with <code>spirit</code> and <code>material</code> as boolean properties. Use this as a start, define custom operators and
derive the follows: human, evil and divine.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Characteristic</span> {
    <span style="color:#66d9ef">var</span> spirit = <span style="color:#66d9ef">false</span>
    <span style="color:#66d9ef">var</span> material = <span style="color:#66d9ef">false</span>
}

<span style="color:#66d9ef">infix</span> <span style="color:#66d9ef">operator</span> <span style="color:#f92672">&amp;|</span>
<span style="color:#66d9ef">infix</span> <span style="color:#66d9ef">operator</span> <span style="color:#f92672">|&amp;</span>
<span style="color:#66d9ef">prefix</span> <span style="color:#66d9ef">operator</span> ...

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">Characteristic</span> {
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">func</span> <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#66d9ef">left</span>: Characteristic, <span style="color:#66d9ef">right</span>: Characteristic) -&gt; Characteristic {
        <span style="color:#66d9ef">return</span> Characteristic(spirit: <span style="color:#66d9ef">left</span>.spirit <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">right</span>.spirit, material: <span style="color:#66d9ef">left</span>.material <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">right</span>.material)
    }
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">func</span> <span style="color:#f92672">||</span> (<span style="color:#66d9ef">left</span>: Characteristic, <span style="color:#66d9ef">right</span>: Characteristic) -&gt; Characteristic {
        <span style="color:#66d9ef">return</span> Characteristic(spirit: <span style="color:#66d9ef">left</span>.spirit <span style="color:#f92672">||</span> <span style="color:#66d9ef">right</span>.spirit, material: <span style="color:#66d9ef">left</span>.material <span style="color:#f92672">||</span> <span style="color:#66d9ef">right</span>.material)
    }
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">func</span> <span style="color:#f92672">&amp;|</span> (<span style="color:#66d9ef">left</span>: Characteristic, <span style="color:#66d9ef">right</span>: Characteristic) -&gt; Characteristic {
        <span style="color:#66d9ef">return</span> Characteristic(spirit: <span style="color:#66d9ef">left</span>.spirit <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">right</span>.spirit, material: <span style="color:#66d9ef">left</span>.material <span style="color:#f92672">||</span> <span style="color:#66d9ef">right</span>.material)
    }
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">func</span> <span style="color:#f92672">|&amp;</span> (<span style="color:#66d9ef">left</span>: Characteristic, <span style="color:#66d9ef">right</span>: Characteristic) -&gt; Characteristic {
        <span style="color:#66d9ef">return</span> Characteristic(spirit: <span style="color:#66d9ef">left</span>.spirit <span style="color:#f92672">||</span> <span style="color:#66d9ef">right</span>.spirit, material: <span style="color:#66d9ef">left</span>.material <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">right</span>.material)
    }
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">prefix</span> <span style="color:#66d9ef">func</span> ... (c: Characteristic) -&gt; String {
        <span style="color:#66d9ef">switch</span> (c.spirit, c.material) {
        <span style="color:#66d9ef">case</span> (<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>):
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Spirit without matter&#34;</span>
        <span style="color:#66d9ef">case</span> (<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>):
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Souless materialist&#34;</span>
        <span style="color:#66d9ef">case</span> (<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>):
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Neither spirit or material, initial void&#34;</span>
        <span style="color:#66d9ef">case</span> (<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">true</span>):
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Ordinary people, mind and body&#34;</span>
        }
    }
}

<span style="color:#66d9ef">let</span> spiritual = Characteristic(spirit: <span style="color:#66d9ef">true</span>, material: <span style="color:#66d9ef">false</span>)
<span style="color:#66d9ef">let</span> material = Characteristic(spirit: <span style="color:#66d9ef">false</span>, material: <span style="color:#66d9ef">true</span>)

<span style="color:#66d9ef">let</span> human = spiritual <span style="color:#f92672">||</span> material
<span style="color:#66d9ef">let</span> evil = spiritual <span style="color:#f92672">&amp;|</span> material
<span style="color:#66d9ef">let</span> divine = spiritual <span style="color:#f92672">|&amp;</span> material

print(<span style="color:#e6db74">&#34;Human: </span><span style="color:#e6db74">\(</span>...human<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
print(<span style="color:#e6db74">&#34;Evil: </span><span style="color:#e6db74">\(</span>...evil<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
print(<span style="color:#e6db74">&#34;Divine: </span><span style="color:#e6db74">\(</span>...divine<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="patterns">Patterns</h2>
<p>A <em>pattern</em> represents the structure of a single value or a composite value. e.g. (1, 2) is a comma-separated list of two elements, matched by the pattern (x, y).</p>
<h3 id="wildcard-pattern">Wildcard Pattern</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> somethingImportant = <span style="color:#e6db74">&#34;Don&#39;t struggle which side of bread you spread butter on - you eat both sides.&#34;</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">_</span> <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>..<span style="color:#ae81ff">3</span> {
    <span style="color:#75715e">// repeat three times</span>
    print(somethingImportant)
}
</code></pre></div><h3 id="identifier-pattern">Identifier pattern</h3>
<p>An identifier pattern is the variable or constant itself, matched by any value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someValue = <span style="color:#ae81ff">123</span>
</code></pre></div><h3 id="value-binding-pattern">Value binding pattern</h3>
<p>Binds matched values to variable or constant names</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> point = (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">3</span>)
<span style="color:#66d9ef">switch</span> point {
<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">let</span> (x, <span style="color:#ae81ff">9</span>, <span style="color:#66d9ef">_</span>):
    print(<span style="color:#e6db74">&#34;At y-coordinate 9, x-coordinates of </span><span style="color:#e6db74">\(</span>x<span style="color:#e6db74">)</span><span style="color:#e6db74">, there&#39;s something on the z-plane.&#34;</span>)
<span style="color:#66d9ef">default</span>:
    <span style="color:#66d9ef">break</span>
}
</code></pre></div><h3 id="tuple-pattern">Tuple pattern</h3>
<p>Comma-separated list of zero or more patterns, enclosed by parentheses.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> (goodNews, badNews): (Int, Int) = (<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> newsGoodBadPerDay = [(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>), (<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>)]
<span style="color:#66d9ef">for</span> (goodNews, <span style="color:#66d9ef">_</span>) <span style="color:#66d9ef">in</span> newsGoodBadPerDay {print(<span style="color:#e6db74">&#34;ignore bad news, number of good news on the day: </span><span style="color:#e6db74">\(</span>goodNews<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)}
</code></pre></div><p>The parentheses around a single element pattern has no effect, the followings are equivalent:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> someonesAge = <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">let</span> (sometowsAge) = <span style="color:#ae81ff">2</span>
<span style="color:#66d9ef">let</span> (somethreesAge): Int = <span style="color:#ae81ff">3</span>
</code></pre></div><h3 id="optional-pattern">Optional pattern</h3>
<p>An optional pattern matches values wrapped in a <code>some(Wrapped)</code> case of an <code>Optional&lt;Wrapped&gt;</code> enumeration.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> kingsClothes: Int? = <span style="color:#66d9ef">nil</span>
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">case</span> .some(<span style="color:#66d9ef">let</span> x) = kingsClothes {
    print(x)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;Kid: the King has no clothes!&#34;</span>)
}

<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">case</span> <span style="color:#66d9ef">let</span> x? = kingsClothes {
    print(x)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;Kid: the King has no clothes!&#34;</span>)
}
</code></pre></div><h3 id="type-casting-patterns">Type-casting patterns</h3>
<pre><code>is &lt;type&gt;
&lt;pattern&gt; as &lt;type&gt;
</code></pre><h3 id="expression-pattern">Expression pattern</h3>
<p>Value of expression. Appears only in <code>switch</code> statement case label.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> spaceDust = (<span style="color:#ae81ff">102</span>, <span style="color:#ae81ff">57</span>, <span style="color:#ae81ff">81</span>)
<span style="color:#66d9ef">switch</span> spaceDust {
<span style="color:#66d9ef">case</span> (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>):
    print(<span style="color:#e6db74">&#34;Origin&#34;</span>)
<span style="color:#66d9ef">case</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">10.</span>..<span style="color:#ae81ff">10</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">10.</span>..<span style="color:#ae81ff">10</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">10.</span>..<span style="color:#ae81ff">10</span>):
    print(<span style="color:#e6db74">&#34;Around origin&#34;</span>)
<span style="color:#66d9ef">default</span>:
    print(<span style="color:#e6db74">&#34;Somewhere else&#34;</span>)
}
</code></pre></div><p>You can overload <code>~=</code> operator to provide custom expression matching behaviour</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#f92672">~=</span>(pattern: String, value: Int) -&gt; Bool {
    <span style="color:#66d9ef">return</span> pattern == <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>value<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>
}

<span style="color:#66d9ef">switch</span> spaceDust {
<span style="color:#66d9ef">case</span> (<span style="color:#e6db74">&#34;0&#34;</span>, <span style="color:#e6db74">&#34;0&#34;</span>, <span style="color:#e6db74">&#34;0&#34;</span>):
    print(<span style="color:#e6db74">&#34;Space dust starts from origin&#34;</span>)
<span style="color:#66d9ef">default</span>:
    print(<span style="color:#e6db74">&#34;Space dust has gone from origin&#34;</span>)
}
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="error-handling">Error Handling</h2>
<p>If you have Java background, error handling is the similar trick as Java&rsquo;s <code>try...catch...</code> and <code>throw</code>.
In Swift, errors are represented by values of types that conform to the empty <code>Error</code> protocol
which indicates that type can be used for error handling.</p>
<p>Enumerations are well suited to modelling a group of related error conditions.</p>
<pre><code>func functionThatThrowsErrors() throws -&gt; String
func functionThatDoesntThrowError() -&gt; String
</code></pre><h3 id="handling-errors-using-do-catch">Handling errors using do-catch</h3>
<pre><code>do {
    try &lt;expression&gt;
    &lt;statements&gt;
} catch &lt;pattern 1&gt; {
    &lt;statements&gt;
} catch &lt;pattern 2&gt; where &lt;condition&gt; {
    &lt;statements&gt;
}
</code></pre><p><strong>Example</strong></p>
<p>In the classic of Buddhism, there are seven types of sorrows in life: birth, aging, sickness, death, separation of lovers, hatred and unsatisfiable desire.
Represents each type of sorrows as an <code>Error</code>, define a function that can throw these errors, and a piece of code that try the function and catch possible errors.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">SorrowOfLife</span>: Error {
    <span style="color:#66d9ef">case</span> birth(msg: String)
    <span style="color:#66d9ef">case</span> aging(msg: String)
    <span style="color:#66d9ef">case</span> sickness(msg: String)
    <span style="color:#66d9ef">case</span> death(msg: String)
    <span style="color:#66d9ef">case</span> separationOfLovers(msg: String)
    <span style="color:#66d9ef">case</span> hatred(msg: String)
    <span style="color:#66d9ef">case</span> unsatisfiableDesire(msg: String)
}

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">LifeTarget</span> {
    <span style="color:#66d9ef">case</span> human, god
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">rollDiceOfLife</span>(<span style="color:#66d9ef">for</span> target: LifeTarget) <span style="color:#66d9ef">throws</span> -&gt; String {
    <span style="color:#66d9ef">guard</span> target == .human <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;silent, calm and harmony&#34;</span>
    }
    
    <span style="color:#66d9ef">let</span> sorrows: [SorrowOfLife] = [.birth(msg: <span style="color:#e6db74">&#34;sin entered the world through one&#39;s birth&#34;</span>),
                                   .aging(msg: <span style="color:#e6db74">&#34;there was a face in the mirror like a face out of time&#34;</span>),
                                   .sickness(msg: <span style="color:#e6db74">&#34;if we got sick, at least we didn&#39;t die&#34;</span>),
                                   .death(msg: <span style="color:#e6db74">&#34;death through sin, so death came to all people, because all sinned&#34;</span>),
                                   .separationOfLovers(msg: <span style="color:#e6db74">&#34;over the sea grows the moon bright; We gaze on it far, far apart. Lovers complain of long, long night.&#34;</span>),
                                   .hatred(msg: <span style="color:#e6db74">&#34;why then when people part, is the moon full and bright?&#34;</span>),
                                   .unsatisfiableDesire(msg: <span style="color:#e6db74">&#34;happiness lies in contentment&#34;</span>)]
    
    <span style="color:#66d9ef">let</span> number = arc4random_uniform(UInt32(sorrows.count <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
    <span style="color:#66d9ef">if</span> number <span style="color:#f92672">&lt;</span> sorrows.count {
        <span style="color:#66d9ef">throw</span> sorrows[Int(number)]
    }
    
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;there is still hope&#34;</span>
}

<span style="color:#66d9ef">do</span> {
    <span style="color:#66d9ef">let</span> diceResult = <span style="color:#66d9ef">try</span> rollDiceOfLife(<span style="color:#66d9ef">for</span>: .human)
    print(<span style="color:#e6db74">&#34;dice result: </span><span style="color:#e6db74">\(</span>diceResult<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.birth(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.aging(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.sickness(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.death(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.separationOfLovers(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.hatred(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> SorrowOfLife.unsatisfiableDesire(<span style="color:#66d9ef">let</span> msg) {
    print(<span style="color:#e6db74">&#34;sorrow of life: </span><span style="color:#e6db74">\(</span>msg<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">catch</span> <span style="color:#66d9ef">_</span> {
    print(<span style="color:#e6db74">&#34;something unexpected in life&#34;</span>)
}
</code></pre></div><h3 id="error-to-optional-values">Error to optional values</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> onesLife = <span style="color:#66d9ef">try</span>? rollDiceOfLife(<span style="color:#66d9ef">for</span>: .human) {
    print(<span style="color:#e6db74">&#34;One&#39;s life: </span><span style="color:#e6db74">\(</span>onesLife<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
} <span style="color:#66d9ef">else</span> {
    print(<span style="color:#e6db74">&#34;One&#39;s life thrown error.&#34;</span>)
}
</code></pre></div><h3 id="disabling-error-propagation">Disabling error propagation</h3>
<p>sometimes you know there won&rsquo;t be an error thrown</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> divineLife = <span style="color:#66d9ef">try</span>! rollDiceOfLife(<span style="color:#66d9ef">for</span>: .god)
print(<span style="color:#e6db74">&#34;Divine&#39;s life: </span><span style="color:#e6db74">\(</span>divineLife<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="cleanup-with-defer">Cleanup with <code>defer</code></h3>
<blockquote>
<p>I expect to pass through life but once. If therefore, there be any kindness I can show, or any good thing I can do to any fellow being, let me do it now, and not <strong>defer</strong> or neglect it, as I shall not pass this way again. &ndash; William Penn</p>
</blockquote>
<p>excuted when current scope exists, in reverse order; I guess it is to have a logical way of cleanup from the most recent to the least recent changes; It&rsquo;s like when you go upstairs from level 1 to level 3, and you want to go downstairs, you have to follow the reversed way as when you went up, that is level 3, 2, 1.</p>
<pre><code>func printInstructions() {
    print(&quot;Velilind's Laws of Experientation:&quot;)
    print(&quot;1. If reproducibility may be a problem, conduct the test only once.&quot;)
    defer {
        print(&quot;cleanup step 1&quot;)
    }
    print(&quot;2. If a straight line fit is required, obtain only two data points.&quot;)
    defer {
        print(&quot;cleanup step 2&quot;)
    }
}

printInstructions()

// prints:
// Velilind's Laws of Experientation:
// 1. If reproducibility may be a problem, conduct the test only once.
// 2. If a straight line fit is required, obtain only two data points.
// cleanup step 2
// cleanup step 1
</code></pre><p>Guess what happens if you put <code>defer</code> inside <code>defer</code>?</p>
<pre><code>func quoteMarkTwain() {
    defer { print(&quot;wisdom never to use either&quot;) }
    defer { defer { print(&quot;freedom of thought&quot;) } }
    defer { defer { defer { print(&quot;freedom of speech&quot;) } } }
    print(&quot;It is by the fortune of God that, in this country, we have three benefits:&quot;)
}

quoteMarkTwain()

// prints:
// It is by the fortune of God that, in this country, we have three benefits:
// freedom of speech
// freedom of thought
// wisdom never to use either
</code></pre><p><code>defer</code> blocks don&rsquo;t <strong>capture</strong> the current value of a variable.</p>
<pre><code>func tasteOfLove() {
    var taste = &quot;sweet&quot;
    defer { print(&quot;a bit \(taste)&quot;) }
    taste = &quot;sour&quot;
    defer { print(&quot;a bit \(taste)&quot;) }
    print(&quot;Taste of the first time one falls in love:&quot;)
}

tasteOfLove()
</code></pre><p>We want to express that sweet and sour are the taste of the first time one falls in love, however there&rsquo;s only sour printed.</p>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="encoding-and-decoding">Encoding and Decoding</h2>
<h3 id="protocols-1">Protocols</h3>
<p><em>Encodable</em></p>
<p>A type that can encode itself into a different representation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">encode</span>(to: Encoder) <span style="color:#66d9ef">throws</span>
</code></pre></div><p><em>Decodable</em></p>
<p>A type that can decode itself from a different representation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// creates a new instance by decoding from given decoder</span>
<span style="color:#66d9ef">init</span>(from decoder: Decoder) <span style="color:#66d9ef">throws</span>
</code></pre></div><p><em>Codable</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">typealias</span> Codable = Encodable <span style="color:#f92672">&amp;</span> Decodable
</code></pre></div><h3 id="automatic-coding">Automatic coding</h3>
<p>Conforming to <code>Codable</code> and make sure all stored properties are also codable.</p>
<ul>
<li>several built-in types are already <code>Codable</code>: <code>String</code>, <code>Int</code>, <code>Double</code>, <code>Data</code>, <code>URL</code></li>
<li><code>Array</code>, <code>Dictionary</code>, <code>Optional</code> are <code>Codable</code> if they contain only <code>Codable</code> types</li>
</ul>
<p>Example:</p>
<blockquote>
<p>a fool with a tool (is still a fool).</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Fool</span>: Codable {
    <span style="color:#66d9ef">var</span> id: String
    <span style="color:#66d9ef">var</span> name: String
    <span style="color:#66d9ef">var</span> tool: Tool
    
    <span style="color:#75715e">// renaming properties</span>
    <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">CodingKeys</span>: String, CodingKey {
        <span style="color:#66d9ef">case</span> id = <span style="color:#e6db74">&#34;identifier&#34;</span>
        <span style="color:#66d9ef">case</span> name
        <span style="color:#66d9ef">case</span> tool
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Tool</span>: Codable {
    <span style="color:#66d9ef">var</span> name: String
}
</code></pre></div><h3 id="coding-custom-types">Coding custom types</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> tool = Tool(name: <span style="color:#e6db74">&#34;Too&#34;</span>)
<span style="color:#66d9ef">var</span> fool = Fool(id: <span style="color:#e6db74">&#34;007&#34;</span>, name: <span style="color:#e6db74">&#34;Foo&#34;</span>, tool: tool)

<span style="color:#66d9ef">let</span> jsonEncoder = JSONEncoder()
<span style="color:#66d9ef">let</span> jsonData = <span style="color:#66d9ef">try</span>! jsonEncoder.encode(fool)
<span style="color:#66d9ef">let</span> jsonString = String(data: jsonData, encoding: .utf8)<span style="color:#f92672">!</span>
print(jsonString)

<span style="color:#66d9ef">let</span> jsonDecoder = JSONDecoder()
fool = <span style="color:#66d9ef">try</span>! jsonDecoder.decode(Fool.<span style="color:#66d9ef">self</span>, from: jsonData)
</code></pre></div><ul>
<li><code>CodingKeys</code> is a nested enumeration inside the type</li>
<li>conforms to <code>CodingKey</code></li>
<li>also need <code>String</code> as raw type</li>
<li>include all properties in the enumeration including the ones that are not renamed</li>
<li>created by default, implemented when renaming is needed</li>
</ul>
<h3 id="coding-manually">Coding manually</h3>
<p>Suppose the JSON looks like:
{&ldquo;identifier&rdquo;: &ldquo;Some One&rdquo;, name: &ldquo;Foo&rdquo;, toolInHand: &ldquo;Hammer&rdquo;}</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">AnotherFool</span> {
    <span style="color:#66d9ef">var</span> id: String
    <span style="color:#66d9ef">var</span> name: String
    <span style="color:#66d9ef">var</span> tool: Tool
    
    <span style="color:#75715e">// renaming properties</span>
    <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">CodingKeys</span>: String, CodingKey {
        <span style="color:#66d9ef">case</span> id = <span style="color:#e6db74">&#34;identifier&#34;</span>
        <span style="color:#66d9ef">case</span> name
        <span style="color:#66d9ef">case</span> toolInHand
    }
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">AnotherFool</span>: Encodable {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">encode</span>(to encoder: Encoder) <span style="color:#66d9ef">throws</span> {
        <span style="color:#66d9ef">var</span> container = encoder.container(keyedBy: CodingKeys.<span style="color:#66d9ef">self</span>)
        <span style="color:#66d9ef">try</span> container.encode(id, forKey: .id)
        <span style="color:#66d9ef">try</span> container.encode(name, forKey: .name)
        <span style="color:#66d9ef">try</span> container.encode(tool.name, forKey: .toolInHand)
    }
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">AnotherFool</span>: Decodable {
    <span style="color:#66d9ef">init</span>(from decoder: Decoder) <span style="color:#66d9ef">throws</span> {
        <span style="color:#66d9ef">let</span> values = <span style="color:#66d9ef">try</span> decoder.container(keyedBy: CodingKeys.<span style="color:#66d9ef">self</span>)
        id = <span style="color:#66d9ef">try</span> values.decode(String.<span style="color:#66d9ef">self</span>, forKey: .id)
        name = <span style="color:#66d9ef">try</span> values.decode(String.<span style="color:#66d9ef">self</span>, forKey: .name)
        <span style="color:#66d9ef">let</span> toolInHand = <span style="color:#66d9ef">try</span> values.decode(String.<span style="color:#66d9ef">self</span>, forKey: .toolInHand)
        tool = Tool(name: toolInHand)
    }
}
</code></pre></div><h3 id="limitation">Limitation</h3>
<ul>
<li><code>extension</code> cannot conform to <code>Codable</code></li>
<li>must use concrete type to encode and decode</li>
</ul>
<p><a href="#table-of-contents">ToC</a></p>
<h2 id="memory-safety">Memory Safety</h2>
<p>Similar to Objective-C, memory management in Swift is also based on ARC (Automatic Reference Counting), when there&rsquo;s no reference to an object, its allocated memory will be released, otherwise, if there&rsquo;s at least one reference to the object, it will stay in memory until further notice.</p>
<ul>
<li><strong>strong</strong> is the default, when a reference of object is declared as <strong>strong</strong>, the reference is strongly hold, and the object&rsquo;s reference counter will increment by 1</li>
<li><strong>weak references</strong> don&rsquo;t increase/decrease the <strong>reference count</strong> of a certain object, declared as optionals, they become <code>nil</code> once the reference count reaches zero</li>
<li><strong>unowned references</strong> behave similar to <code>weak</code>, they always expect to have a value - can&rsquo;t be declared as optional.</li>
<li>use <code>weak</code> when object can be deallocated while referencing, for example, <code>delegate</code></li>
<li>use <code>unowned</code> when object cannot be deallocated while referencing, for example, referencing <code>self</code> in an escaping completion block</li>
</ul>
<h3 id="capture-list">Capture list</h3>
<p>A <strong>capture list</strong> is an array of variables captured by a closure</p>
<p><strong>Example</strong></p>
<p>Pokemon runs fast, we want to catch Pikachu when it appears.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> pokemon = <span style="color:#e6db74">&#34;Pikachu&#34;</span>
<span style="color:#66d9ef">var</span> closure = { print(<span style="color:#e6db74">&#34;Let&#39;s catch </span><span style="color:#e6db74">\(</span>pokemon<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>) }
pokemon = <span style="color:#e6db74">&#34;Zoobat&#34;</span>
closure()
<span style="color:#75715e">// Print: &#34;Let&#39;s catch Zoobat&#34;</span>

pokemon = <span style="color:#e6db74">&#34;Pikachu&#34;</span>
closure = { [pokemon] <span style="color:#66d9ef">in</span> print(<span style="color:#e6db74">&#34;Let&#39;s catch </span><span style="color:#e6db74">\(</span>pokemon<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>) }
pokemon = <span style="color:#e6db74">&#34;Zoobat&#34;</span>
closure()
<span style="color:#75715e">// Print: &#34;Let&#39;s catch Pikachu&#34;</span>
</code></pre></div><p>With reference types, a capture list makes the closure to capture and store the current <em>reference</em> stored inside the captured variable.</p>
<h3 id="unowned-self">Unowned self</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Book</span> {
    
    <span style="color:#66d9ef">var</span> name = <span style="color:#e6db74">&#34;Book&#34;</span>
    
    <span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">var</span> sageRetrieveContent: () -&gt; String = {
        [<span style="color:#66d9ef">unowned</span> <span style="color:#66d9ef">self</span>] <span style="color:#66d9ef">in</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span><span style="color:#66d9ef">self</span>.name<span style="color:#e6db74">)</span><span style="color:#e6db74">: reading helps us learn so much about beauty and truth that we can live a better life in our own ways.&#34;</span>
    }
    
    <span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">var</span> ordinaryRetrieveContent: () -&gt; String = {
        [<span style="color:#66d9ef">unowned</span> <span style="color:#66d9ef">self</span>] <span style="color:#66d9ef">in</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span><span style="color:#66d9ef">self</span>.name<span style="color:#e6db74">)</span><span style="color:#e6db74">: as long as one studies hard, wealth and beautiful women will all come his way.&#34;</span>
    }
}

<span style="color:#66d9ef">let</span> book = Book()
print(book.sageRetrieveContent())
print(book.ordinaryRetrieveContent())
</code></pre></div><h3 id="the-strong-weak-pattern">The strong weak pattern</h3>
<p>When <code>self</code> could be <code>nil</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">Book</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">checkWorm</span>() {
        DispatchQueue.main.async {
            [<span style="color:#66d9ef">weak</span> <span style="color:#66d9ef">self</span>] <span style="color:#66d9ef">in</span>
            <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> strongSelf = <span style="color:#66d9ef">self</span> <span style="color:#66d9ef">else</span> {
                print(<span style="color:#e6db74">&#34;The book no longer exists.&#34;</span>)
                <span style="color:#66d9ef">return</span>
            }
            <span style="color:#66d9ef">let</span> hasWorm = strongSelf.name.contains(<span style="color:#e6db74">&#34;worm&#34;</span>)
            <span style="color:#66d9ef">if</span> hasWorm {
                print(<span style="color:#e6db74">&#34;The book has worm.&#34;</span>)
            }
        }
    }
}
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="data-structure-in-swift">Data Structure in Swift</h2>
<h3 id="stack">Stack</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Stack</span>&lt;T&gt; {

    <span style="color:#66d9ef">var</span> stack = [T]()
    <span style="color:#66d9ef">var</span> isEmpty: Bool {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stack.isEmpty
    }
    <span style="color:#66d9ef">var</span> peek: T? {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stack.last
    }
    <span style="color:#66d9ef">var</span> size: Int {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stack.count
    }

    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">_</span> thing: T) {
        <span style="color:#66d9ef">self</span>.stack.append(thing)
    }

    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">pop</span>() -&gt; T? {
        <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">self</span>.isEmpty == <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stack.removeLast()
    }
}
</code></pre></div><h3 id="linked-list">Linked List</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ListNode</span>&lt;T&gt; {
    <span style="color:#66d9ef">var</span> value: T
    <span style="color:#66d9ef">var</span> next: ListNode&lt;T&gt;?

    <span style="color:#66d9ef">init</span>(<span style="color:#66d9ef">_</span> value: T) {
        <span style="color:#66d9ef">self</span>.value = value
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedList</span>&lt;T&gt; {
    <span style="color:#66d9ef">var</span> head: ListNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> tail: ListNode&lt;T&gt;?
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">LinkedList</span> {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">appendToTail</span>(<span style="color:#66d9ef">_</span> value: T) {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> tail = <span style="color:#66d9ef">self</span>.tail {
            tail.next = ListNode(value)
            <span style="color:#66d9ef">self</span>.tail = tail.next
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">self</span>.tail = ListNode(value)
            <span style="color:#66d9ef">self</span>.head = <span style="color:#66d9ef">self</span>.tail
        }
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">appendToHead</span>(<span style="color:#66d9ef">_</span> value: T) {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> head = <span style="color:#66d9ef">self</span>.head {
            <span style="color:#66d9ef">let</span> newHead = ListNode(value)
            newHead.next = head
            <span style="color:#66d9ef">self</span>.head = newHead
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">self</span>.head = ListNode(value)
            <span style="color:#66d9ef">self</span>.tail = <span style="color:#66d9ef">self</span>.head
        }
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printNode</span>&lt;T: CustomStringConvertible&gt;(<span style="color:#66d9ef">_</span> node: ListNode&lt;T&gt;?) {
    <span style="color:#66d9ef">var</span> current = node
    <span style="color:#66d9ef">var</span> values = [T]()
    <span style="color:#66d9ef">while</span> current <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        values.append(current!.value)
        current = current!.next
    }
    print(<span style="color:#e6db74">&#34;Values in list nodes: </span><span style="color:#e6db74">\(</span>values<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
}

<span style="color:#66d9ef">let</span> node1 = ListNode(<span style="color:#ae81ff">2</span>)
<span style="color:#66d9ef">let</span> node2 = ListNode(<span style="color:#ae81ff">9</span>)
<span style="color:#66d9ef">let</span> node3 = ListNode(<span style="color:#ae81ff">7</span>)
<span style="color:#66d9ef">let</span> node4 = ListNode(<span style="color:#ae81ff">3</span>)
node1.next = node2
node2.next = node3
node3.next = node4

printNode(node1)
</code></pre></div><p>Given a linked list and a value X, return a new linked list with values less than X on left and values greater than X on right</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">partition</span>&lt;T: Comparable&gt;(<span style="color:#66d9ef">_</span> head: ListNode&lt;T&gt;?, <span style="color:#66d9ef">_</span> x: T) -&gt; ListNode&lt;T&gt;? {
    <span style="color:#66d9ef">var</span> leftHead: ListNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> rightHead: ListNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> left: ListNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> right: ListNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> node = head

    <span style="color:#66d9ef">while</span> node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">if</span> node!.value <span style="color:#f92672">&lt;</span> x {
            <span style="color:#66d9ef">if</span> leftHead == <span style="color:#66d9ef">nil</span> {
                leftHead = node
                <span style="color:#66d9ef">left</span> = leftHead
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">left</span>!.next = node
                <span style="color:#66d9ef">left</span> = node!
            }
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">if</span> rightHead == <span style="color:#66d9ef">nil</span> {
                rightHead = node
                <span style="color:#66d9ef">right</span> = rightHead
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">right</span>!.next = node
                <span style="color:#66d9ef">right</span> = node!
            }
        }
        node = node!.next
    }
    
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> right = <span style="color:#66d9ef">right</span> {
        <span style="color:#66d9ef">right</span>.next = <span style="color:#66d9ef">nil</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> left = <span style="color:#66d9ef">left</span> {
        <span style="color:#66d9ef">left</span>.next = rightHead
    }
    <span style="color:#66d9ef">if</span> leftHead <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> leftHead
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> rightHead
    }
}

<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> partitionedList = partition(node1, <span style="color:#ae81ff">5</span>) {
    printNode(partitionedList)
}

<span style="color:#75715e">// prints: Values in list nodes: [2, 3, 9, 7]</span>
</code></pre></div><p>Given a head node, determine whether a cycle exists.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hasCycle</span>&lt;T&gt;(<span style="color:#66d9ef">_</span> head: ListNode&lt;T&gt;?) -&gt; Bool {
    <span style="color:#66d9ef">var</span> slow = head
    <span style="color:#66d9ef">var</span> fast = head

    <span style="color:#66d9ef">while</span> fast <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> fast!.next <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        slow = slow!.next
        fast = fast!.next!.next
        
        <span style="color:#66d9ef">if</span> slow === fast {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        }
    }

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
}
</code></pre></div><p>Given a head node, remove the nth last node.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">removeNthFromEnd</span>&lt;T&gt;(head: ListNode&lt;T&gt;?, <span style="color:#66d9ef">_</span> n: Int) -&gt; ListNode&lt;T&gt;? {
    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> head = head <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
    }
    
    <span style="color:#66d9ef">var</span> first: ListNode&lt;T&gt;? = head
    <span style="color:#66d9ef">var</span> second: ListNode&lt;T&gt;? = head

    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">_</span> <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">0</span> ..<span style="color:#f92672">&lt;</span> n {
        <span style="color:#66d9ef">if</span> second == <span style="color:#66d9ef">nil</span> {
            <span style="color:#66d9ef">break</span>
        }
        second = second!.next
    }
    
    <span style="color:#66d9ef">while</span> second <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> second!.next <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        first = first!.next
        second = second!.next
    }
    
    first!.next = first!.next!.next
    <span style="color:#66d9ef">return</span> head
}

print(<span style="color:#e6db74">&#34;Existing list:&#34;</span>)
printNode(node1)

print(<span style="color:#e6db74">&#34;List with 2nd last node removed:&#34;</span>)
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> newHead = removeNthFromEnd(head: node1, <span style="color:#ae81ff">2</span>) {
    printNode(newHead)
}
</code></pre></div><h3 id="queue">Queue</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">protocol</span> <span style="color:#a6e22e">Queue</span> {
    associatedtype Element

    <span style="color:#66d9ef">var</span> isEmpty: Bool { <span style="color:#66d9ef">get</span> }
    <span style="color:#66d9ef">var</span> size: Int { <span style="color:#66d9ef">get</span> }
    <span style="color:#66d9ef">var</span> peek: Element? { <span style="color:#66d9ef">get</span> }

    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">enqueue</span>(<span style="color:#66d9ef">_</span> newElement: Element)
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dequeue</span>() -&gt; Element?
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ArrayQueue</span>&lt;T&gt;: Queue {

    <span style="color:#66d9ef">var</span> isEmpty: Bool {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.isEmpty <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.isEmpty
    }
    
    <span style="color:#66d9ef">var</span> size: Int {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.count <span style="color:#f92672">+</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.count
    }
    
    <span style="color:#66d9ef">var</span> peek: T? {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.isEmpty ? <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.first : <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.last
    }
    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> left = [T]()
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> right = [T]()
    
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">enqueue</span>(<span style="color:#66d9ef">_</span> newElement: T) {
        <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.append(newElement)
    }
    
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dequeue</span>() -&gt; T? {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.isEmpty {
            <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span> = <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.reversed()
            <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">right</span>.removeAll()
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.<span style="color:#66d9ef">left</span>.popLast()
    }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">StackQueue</span>&lt;T&gt;: Queue {

    <span style="color:#66d9ef">var</span> isEmpty: Bool {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stackA.isEmpty <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">self</span>.stackB.isEmpty
    }
    
    <span style="color:#66d9ef">var</span> peek: T? {
        <span style="color:#66d9ef">self</span>.shift()
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stackB.peek
    }
    
    <span style="color:#66d9ef">var</span> size: Int {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stackA.size <span style="color:#f92672">+</span> <span style="color:#66d9ef">self</span>.stackB.size
    }
    
    <span style="color:#66d9ef">mutating</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">enqueue</span>(<span style="color:#66d9ef">_</span> newElement: T) {
        <span style="color:#66d9ef">self</span>.stackA.push(newElement)
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dequeue</span>() -&gt; T? {
        <span style="color:#66d9ef">self</span>.shift()
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">self</span>.stackB.pop()
    }
    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">shift</span>() {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">self</span>.stackB.isEmpty {
            <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">let</span> fromA = <span style="color:#66d9ef">self</span>.stackA.pop() {
                <span style="color:#66d9ef">self</span>.stackB.push(fromA)
            }
        }
    }

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> stackA = Stack&lt;T&gt;()
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> stackB = Stack&lt;T&gt;()
}
</code></pre></div><p>Simplify a file path.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">simplifyPath</span>(<span style="color:#66d9ef">_</span> path: String) -&gt; String {
    <span style="color:#66d9ef">var</span> simplifiedPath = [String]()
    <span style="color:#66d9ef">let</span> pathComponents = path.components(separatedBy: <span style="color:#e6db74">&#34;/&#34;</span>)
    <span style="color:#66d9ef">for</span> component <span style="color:#66d9ef">in</span> pathComponents {
        <span style="color:#66d9ef">guard</span> component <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">continue</span>
        }
        <span style="color:#66d9ef">if</span> component == <span style="color:#e6db74">&#34;..&#34;</span> {
            <span style="color:#66d9ef">if</span> simplifiedPath.isEmpty == <span style="color:#66d9ef">false</span> {
                simplifiedPath.removeLast()
            }
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> component.isEmpty == <span style="color:#66d9ef">false</span> {
            simplifiedPath.append(component)
        }
    }
    
    <span style="color:#66d9ef">let</span> fullPath = simplifiedPath.reduce(<span style="color:#e6db74">&#34;&#34;</span>) { (base, path) -&gt; String <span style="color:#66d9ef">in</span>
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>base<span style="color:#e6db74">)</span><span style="color:#e6db74">/</span><span style="color:#e6db74">\(</span>path<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>
    }
    
    <span style="color:#66d9ef">return</span> fullPath.isEmpty ? <span style="color:#e6db74">&#34;/&#34;</span> : fullPath
}

<span style="color:#66d9ef">let</span> shortPath = <span style="color:#e6db74">&#34;/home/username/Documents/../Picture/./Travel/&#34;</span>
<span style="color:#66d9ef">let</span> simplifiedPath = simplifyPath(shortPath)
print(<span style="color:#e6db74">&#34;Simplified path: </span><span style="color:#e6db74">\(</span>simplifiedPath<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><h3 id="binary-tree">Binary Tree</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TreeNode</span>&lt;T&gt; {
    <span style="color:#66d9ef">var</span> value: T
    <span style="color:#66d9ef">var</span> left: TreeNode&lt;T&gt;?
    <span style="color:#66d9ef">var</span> right: TreeNode&lt;T&gt;?

    <span style="color:#66d9ef">init</span>(<span style="color:#66d9ef">_</span> value: T) {
        <span style="color:#66d9ef">self</span>.value = value
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">depthOfTree</span>&lt;T&gt;(<span style="color:#66d9ef">_</span> root: TreeNode&lt;T&gt;?) -&gt; Int {
    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> root = root <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    }
    <span style="color:#66d9ef">return</span> max(depthOfTree(root.<span style="color:#66d9ef">left</span>), depthOfTree(root.<span style="color:#66d9ef">right</span>)) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
}
</code></pre></div><p>Check whether a binary tree is a valid search tree. (BST)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">isValidBST</span>&lt;T: Comparable&gt;(root: TreeNode&lt;T&gt;?) -&gt; Bool {
    <span style="color:#66d9ef">return</span> isValidBSTNode(root, <span style="color:#66d9ef">nil</span>, <span style="color:#66d9ef">nil</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">isValidBSTNode</span>&lt;T: Comparable&gt;(<span style="color:#66d9ef">_</span> node: TreeNode&lt;T&gt;?, <span style="color:#66d9ef">_</span> min: T?, <span style="color:#66d9ef">_</span> max: T?) -&gt; Bool {
    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> node = node <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> min = min, node.value <span style="color:#f92672">&lt;=</span> min {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> max = max, node.value <span style="color:#f92672">&gt;=</span> max {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
    }
    <span style="color:#66d9ef">return</span> isValidBSTNode(node.<span style="color:#66d9ef">left</span>, min, node.value) <span style="color:#f92672">&amp;&amp;</span> isValidBSTNode(node.<span style="color:#66d9ef">right</span>, node.value, max)
}
</code></pre></div><p>Traversal Binary Tree</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">preorderTraversal</span>&lt;T&gt;(root: TreeNode&lt;T&gt;?) -&gt; [T] {
    <span style="color:#66d9ef">var</span> result = [T]()
    <span style="color:#66d9ef">var</span> stack = [TreeNode&lt;T&gt;]()
    <span style="color:#66d9ef">var</span> node = root
    <span style="color:#66d9ef">while</span> node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">||</span> stack.isEmpty == <span style="color:#66d9ef">false</span> {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> nonNilNode = node {
            result.append(nonNilNode.value)
            stack.append(nonNilNode)
            node = nonNilNode.<span style="color:#66d9ef">left</span>
        } <span style="color:#66d9ef">else</span> {
            node = stack.removeLast().<span style="color:#66d9ef">right</span>
        }
    }
    <span style="color:#66d9ef">return</span> result
}

<span style="color:#66d9ef">let</span> tnode1 = TreeNode(<span style="color:#ae81ff">1</span>)
<span style="color:#66d9ef">let</span> tnode2 = TreeNode(<span style="color:#ae81ff">2</span>)
<span style="color:#66d9ef">let</span> tnode3 = TreeNode(<span style="color:#ae81ff">3</span>)
<span style="color:#66d9ef">let</span> tnode4 = TreeNode(<span style="color:#ae81ff">4</span>)
<span style="color:#66d9ef">let</span> tnode5 = TreeNode(<span style="color:#ae81ff">5</span>)
<span style="color:#66d9ef">let</span> tnode6 = TreeNode(<span style="color:#ae81ff">6</span>)
<span style="color:#66d9ef">let</span> tnode7 = TreeNode(<span style="color:#ae81ff">7</span>)
<span style="color:#66d9ef">let</span> tnode8 = TreeNode(<span style="color:#ae81ff">8</span>)
<span style="color:#66d9ef">let</span> tnode9 = TreeNode(<span style="color:#ae81ff">9</span>)
<span style="color:#66d9ef">let</span> tnode10 = TreeNode(<span style="color:#ae81ff">10</span>)
<span style="color:#66d9ef">let</span> tnode11 = TreeNode(<span style="color:#ae81ff">11</span>)
<span style="color:#66d9ef">let</span> tnode12 = TreeNode(<span style="color:#ae81ff">12</span>)
<span style="color:#66d9ef">let</span> tnode13 = TreeNode(<span style="color:#ae81ff">13</span>)
<span style="color:#66d9ef">let</span> tnode14 = TreeNode(<span style="color:#ae81ff">14</span>)
<span style="color:#66d9ef">let</span> tnode15 = TreeNode(<span style="color:#ae81ff">15</span>)

tnode1.<span style="color:#66d9ef">left</span> = tnode2
tnode1.<span style="color:#66d9ef">right</span> = tnode3
tnode2.<span style="color:#66d9ef">left</span> = tnode4
tnode2.<span style="color:#66d9ef">right</span> = tnode5
tnode3.<span style="color:#66d9ef">left</span> = tnode6
tnode3.<span style="color:#66d9ef">right</span> = tnode7
tnode4.<span style="color:#66d9ef">left</span> = tnode8
tnode4.<span style="color:#66d9ef">right</span> = tnode9
tnode5.<span style="color:#66d9ef">left</span> = tnode10
tnode5.<span style="color:#66d9ef">right</span> = tnode11
tnode6.<span style="color:#66d9ef">left</span> = tnode12
tnode6.<span style="color:#66d9ef">right</span> = tnode13
tnode7.<span style="color:#66d9ef">left</span> = tnode14
tnode7.<span style="color:#66d9ef">right</span> = tnode15

<span style="color:#66d9ef">let</span> result = preorderTraversal(root: tnode1)
print(<span style="color:#e6db74">&#34;Preorder traversal result:&#34;</span>)
result.forEach { print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>$0<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>) }

<span style="color:#75715e">// Preorder traversal result:</span>
<span style="color:#75715e">// 1</span>
<span style="color:#75715e">// 2</span>
<span style="color:#75715e">// 4</span>
<span style="color:#75715e">// 8</span>
<span style="color:#75715e">// 9</span>
<span style="color:#75715e">// 5</span>
<span style="color:#75715e">// 10</span>
<span style="color:#75715e">// 11</span>
<span style="color:#75715e">// 3</span>
<span style="color:#75715e">// 6</span>
<span style="color:#75715e">// 12</span>
<span style="color:#75715e">// 13</span>
<span style="color:#75715e">// 7</span>
<span style="color:#75715e">// 14</span>
<span style="color:#75715e">// 15</span>
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="sorting-and-searching">Sorting and Searching</h2>
<h3 id="merge-sort">Merge Sort</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">mergeSort</span>(<span style="color:#66d9ef">_</span> array: [Int]) -&gt; [Int] {
    <span style="color:#66d9ef">var</span> helper = Array(repeating: <span style="color:#ae81ff">0</span>, count: array.count), array = array
    mergeSort(&amp;array, &amp;helper, <span style="color:#ae81ff">0</span>, array.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    <span style="color:#66d9ef">return</span> array
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">mergeSort</span>(<span style="color:#66d9ef">_</span> array: <span style="color:#66d9ef">inout</span> [Int], <span style="color:#66d9ef">_</span> helper: <span style="color:#66d9ef">inout</span> [Int], <span style="color:#66d9ef">_</span> low: Int, <span style="color:#66d9ef">_</span> high: Int) {
    <span style="color:#66d9ef">guard</span> low <span style="color:#f92672">&lt;</span> high <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#66d9ef">let</span> middle = (high <span style="color:#f92672">-</span> low) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> low
    mergeSort(&amp;array, &amp;helper, low, middle)
    mergeSort(&amp;array, &amp;helper, middle <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, high)
    merge(&amp;array, &amp;helper, low, middle, high)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">merge</span>(<span style="color:#66d9ef">_</span> array: <span style="color:#66d9ef">inout</span> [Int], <span style="color:#66d9ef">_</span> helper: <span style="color:#66d9ef">inout</span> [Int], <span style="color:#66d9ef">_</span> low: Int, <span style="color:#66d9ef">_</span> middle: Int, <span style="color:#66d9ef">_</span> high: Int) {
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> low...high {
        helper[i] = array[i]
    }
    
    <span style="color:#66d9ef">var</span> left = low, <span style="color:#66d9ef">right</span> = middle <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, current = low
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">left</span> <span style="color:#f92672">&lt;=</span> middle <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">right</span> <span style="color:#f92672">&lt;=</span> high {
        <span style="color:#66d9ef">if</span> helper[<span style="color:#66d9ef">left</span>] <span style="color:#f92672">&lt;</span> helper[<span style="color:#66d9ef">right</span>] {
            array[current] = helper[<span style="color:#66d9ef">left</span>]
            <span style="color:#66d9ef">left</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        } <span style="color:#66d9ef">else</span> {
            array[current] = helper[<span style="color:#66d9ef">right</span>]
            <span style="color:#66d9ef">right</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        }
        current <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
    }
    
    <span style="color:#66d9ef">guard</span> middle <span style="color:#f92672">-</span> <span style="color:#66d9ef">left</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">// check whether left half exhausted, if so, there&#39;s no need to handle rest</span>
        <span style="color:#66d9ef">return</span>
    }
    
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">0.</span>..(middle <span style="color:#f92672">-</span> <span style="color:#66d9ef">left</span>) {
        <span style="color:#75715e">// handle the rest, only left half can have remaining</span>
        array[current] = helper[<span style="color:#66d9ef">left</span> <span style="color:#f92672">+</span> i]
    }
}
</code></pre></div><h3 id="quick-sort">Quick Sort</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">quickSort</span>(<span style="color:#66d9ef">_</span> array: [Int]) -&gt; [Int] {
    <span style="color:#66d9ef">guard</span> array.count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> array
    }
    <span style="color:#66d9ef">let</span> pivot = array[array.count <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>]
    <span style="color:#66d9ef">let</span> left = array.filter { $0 <span style="color:#f92672">&lt;</span> pivot }
    <span style="color:#66d9ef">let</span> middle = array.filter { $0 == pivot }
    <span style="color:#66d9ef">let</span> right = array.filter { $0 <span style="color:#f92672">&gt;</span> pivot }
    <span style="color:#66d9ef">return</span> quickSort(<span style="color:#66d9ef">left</span>) <span style="color:#f92672">+</span> middle <span style="color:#f92672">+</span> quickSort(<span style="color:#66d9ef">right</span>)
}
</code></pre></div><h3 id="basic-searching">Basic Searching</h3>
<p>While iterating through the whole collection could find search term in O(n), searching in a sorted collection in a binary way could reduce it to O(logn).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">binarySearch</span>&lt;T: Comparable&gt;(<span style="color:#66d9ef">_</span> values: [T], <span style="color:#66d9ef">_</span> target: T) -&gt; Bool {
    <span style="color:#66d9ef">var</span> left = <span style="color:#ae81ff">0</span>, mid = <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">right</span> = values.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">left</span> <span style="color:#f92672">&lt;=</span> <span style="color:#66d9ef">right</span> {
        mid = (<span style="color:#66d9ef">right</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">left</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">left</span>
        <span style="color:#66d9ef">if</span> values[mid] == target {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> values[mid] <span style="color:#f92672">&lt;</span> target {
            <span style="color:#66d9ef">left</span> = mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">right</span> = mid <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
}

<span style="color:#75715e">// note: people often forget +1 and -1 when re-adjusting left and right</span>
</code></pre></div><p>There are a few meetings, merge the ones that overlap.
Example: given [[1, 3], [5, 6], [4, 7], [2, 3]]
Output: [[1, 3], [4, 7]]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MeetingTime</span> {
    <span style="color:#66d9ef">var</span> start: Int
    <span style="color:#66d9ef">var</span> end: Int
    <span style="color:#66d9ef">init</span>(<span style="color:#66d9ef">_</span> start: Int, <span style="color:#66d9ef">_</span> end: Int) {
        <span style="color:#66d9ef">self</span>.start = start
        <span style="color:#66d9ef">self</span>.end = end
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">merge</span>(meetingTimes: [MeetingTime]) -&gt; [MeetingTime] {
    <span style="color:#66d9ef">guard</span> meetingTimes.count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> meetingTimes
    }
    
    <span style="color:#66d9ef">let</span> sortedTimes = meetingTimes.sorted { (time1, time2) -&gt; Bool <span style="color:#66d9ef">in</span>
        <span style="color:#66d9ef">if</span> time1.start <span style="color:#f92672">!=</span> time2.start {
            <span style="color:#66d9ef">return</span> time1.start <span style="color:#f92672">&lt;</span> time2.start
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">return</span> time1.end <span style="color:#f92672">&lt;</span> time2.end
        }
    }
    
    <span style="color:#66d9ef">var</span> mergedTimes = [MeetingTime]()
    mergedTimes.append(sortedTimes[<span style="color:#ae81ff">0</span>])
    
    <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">1.</span>.&lt;sortedTimes.count {
        <span style="color:#66d9ef">let</span> current = sortedTimes[i]
        <span style="color:#66d9ef">let</span> last = sortedTimes[sortedTimes.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
        <span style="color:#66d9ef">if</span> current.start <span style="color:#f92672">&gt;</span> last.end {
            mergedTimes.append(current)
        } <span style="color:#66d9ef">else</span> {
            last.end = max(last.end, current.end)
        }
    }
    
    <span style="color:#66d9ef">return</span> mergedTimes
}
</code></pre></div><p>A product has several versions, if version n had a bug, versions after n would all have the same bug. Given a function that checks whether a given version has a bug, find the first version that has the bug.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">findFirstBugVersion</span>(version: Int, isBugVersion: ((Int) -&gt; Bool)) -&gt; Int {
    <span style="color:#66d9ef">guard</span> version <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> version
    }
    <span style="color:#66d9ef">var</span> left = <span style="color:#ae81ff">1</span>, mid = version <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">right</span> = version
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">left</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">right</span> {
        mid = (<span style="color:#66d9ef">right</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">left</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">left</span>
        <span style="color:#66d9ef">if</span> isBugVersion(mid) {
            <span style="color:#66d9ef">right</span> = mid
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">left</span> = mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">left</span>
}
</code></pre></div><p>Use binary search for rotated array, for example, [0, 1, 2, 4, 5, 6, 9] becomes [4, 5, 6, 9, 0, 1, 2].</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">searchRotated</span>&lt;T: Comparable&gt;(values: [T], target: T) -&gt; Int {
    <span style="color:#66d9ef">var</span> (<span style="color:#66d9ef">left</span>, mid, <span style="color:#66d9ef">right</span>) = (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, values.count <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    
    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">left</span> <span style="color:#f92672">&lt;=</span> <span style="color:#66d9ef">right</span> {
        mid = (<span style="color:#66d9ef">right</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">left</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">left</span>
        
        <span style="color:#66d9ef">if</span> values[mid] == target {
            <span style="color:#66d9ef">return</span> mid
        }
        
        <span style="color:#66d9ef">if</span> values[mid] <span style="color:#f92672">&gt;</span> values[<span style="color:#66d9ef">left</span>] {
            <span style="color:#66d9ef">if</span> values[mid] <span style="color:#f92672">&gt;</span> target <span style="color:#f92672">&amp;&amp;</span> target <span style="color:#f92672">&gt;=</span> values[<span style="color:#66d9ef">left</span>] {
                <span style="color:#66d9ef">right</span> = mid <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">left</span> = mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
            }
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">if</span> values[mid] <span style="color:#f92672">&lt;</span> target <span style="color:#f92672">&amp;&amp;</span> target <span style="color:#f92672">&lt;=</span> values[<span style="color:#66d9ef">right</span>] {
                <span style="color:#66d9ef">left</span> = mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">right</span> = mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
            }
        }
    }
    
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
}
</code></pre></div><p><a href="#table-of-contents">ToC</a></p>
<h2 id="objective-c">Objective-C</h2>
<h3 id="mixing-objective-c-and-swift">Mixing Objective-C and Swift</h3>
<ul>
<li>To use Objective-C code in Swift, the header file name of Objective-C code need to be in ProjectName-Bridging-Header.h</li>
<li>To use Swift in Objective-C, import header file ProjectName-Swift.h</li>
<li>To expose Swift function or property, prefix it with <code>@objc</code>; If a Swift class is a subclass of <code>NSObject</code>, Swift would add <code>@objc</code> to non-private functions and properties</li>
</ul>
<h3 id="initializer-init">Initializer (init)</h3>
<ul>
<li>In Objective-C, initializer cannot make sure all member properties are initialized (ie. have values); Compiler does not warn for uninitialized properties.</li>
<li>In Swift, initializer has to make sure all non-optional member properties have values.</li>
<li>Swift also added <code>convenience</code> and <code>required</code> prefix for initializer.</li>
</ul>
<h3 id="difference-of-protocol">Difference of Protocol</h3>
<ul>
<li>Both Objective-C and Swift can use protocol as delegate</li>
<li>Protocol in Swift can have extension and default implementation; Value-type can also conform to protocol.</li>
</ul>
<h3 id="introspection">Introspection</h3>
<p>In Objective-C, there are two methods to check whether an object is of certain type:</p>
<ul>
<li><code>isKindOfClass</code>: check whether the object is of specified class type or its subclass types</li>
<li><code>isMemberOfClass</code>: check whether the object is of specified class type (not its subclass types)</li>
</ul>
<p>In Swift, <code>is</code> can be used for the same purpose, it&rsquo;s the same as <code>isKindOfClass</code>.</p>
<p><a href="#table-of-contents">ToC</a></p>

</main>

<footer>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5504633517481956"
     data-ad-slot="4142928173"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



<div id="disqus_thread"></div>
<script>


var disqus_config = function () {
this.page.url = "https:\/\/www.haozhexu.me\/article\/2020\/swiftnotes\/";  
this.page.identifier = "https:\/\/www.haozhexu.me\/article\/2020\/swiftnotes\/"; 
};
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://haozhexu.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




<hr/>
© <a href="https://www.haozhexu.me">Haozhe XU</a> 2017

</footer>
</body>
</html>
